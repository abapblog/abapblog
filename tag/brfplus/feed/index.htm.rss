<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>brfplus | ABAP Blog</title>
	<atom:link href="https://abap-blog.ru/tag/brfplus/feed/" rel="self" type="application/rss+xml" />
	<link>https://abap-blog.ru</link>
	<description>Все о разработке в решениях от SAP</description>
	<lastBuildDate>Tue, 02 Mar 2021 06:03:07 +0000</lastBuildDate>
	<language>ru-RU</language>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=5.8.1</generator>
	<item>
		<title>Введение в BRFPlus</title>
		<link>https://abap-blog.ru/others/vvedenie-v-brfplus/</link>
					<comments>https://abap-blog.ru/others/vvedenie-v-brfplus/#comments</comments>
		
		<dc:creator><![CDATA[Astrafox]]></dc:creator>
		<pubDate>Wed, 15 Aug 2012 17:04:28 +0000</pubDate>
				<category><![CDATA[Прочее]]></category>
		<category><![CDATA[brfplus]]></category>
		<guid isPermaLink="false">http://abap-blog.ru/?p=930</guid>

					<description><![CDATA[<p>Ни одна организация не может быть более эффективна, чем её системы. Системы должны быть направлены на саму организацию, её цели и сотрудников. Ориентация на бизнес-процессы показывает, как работает организация в действительности, и является первым шагом на пути к непрерывной оптимизации. Сочетание поддержки принятия решений с процессно-ориентированным образом мышления ведёт к упрощённым и быстро реагирующим процессам, [&#8230;]</p>
<p>The post <a href="https://abap-blog.ru/others/vvedenie-v-brfplus/">Введение в BRFPlus</a> first appeared on <a href="https://abap-blog.ru">ABAP Blog</a>.</p>]]></description>
										<content:encoded><![CDATA[<p>Ни одна организация не может быть более эффективна, чем её системы. Системы должны быть направлены на саму организацию, её цели и сотрудников. Ориентация на бизнес-процессы показывает, как работает организация в действительности, и является первым шагом на пути к непрерывной оптимизации. Сочетание поддержки принятия решений с процессно-ориентированным образом мышления ведёт к упрощённым и быстро реагирующим процессам, а также к их гибкому применению. Аутсорсинг принятия решений и их моделирование в виде бизнес-правил улучшает понимание процессов, облегчает их преобразование и обеспечивает гармонию бизнеса с ИТ. Каждый из таких факторов как упрощённые процессы, их гибкое применение, лёгкость преобразования и целостность, усиливают ориентацию на бизнес-процессы в целях повышения созданной стоимости. Предоставление информации по поиску решений является ключевым моментом для сохранения предприятием полного контроля над процессами.</p>
<div class="arve" data-mode="normal" data-oembed="1" data-provider="youtube" id="arve-youtube-2ouhjeh02hu618a2322370ee085122981" style="max-width:720px;" itemscope itemtype="http://schema.org/VideoObject">
<span class="arve-inner">
<span class="arve-embed arve-embed--has-aspect-ratio">
<span class="arve-ar" style="padding-top:75.000000%"></span>
<meta itemprop="embedURL" content="https://www.youtube-nocookie.com/embed/2ouhJeH02HU?feature=oembed&amp;iv_load_policy=3&amp;modestbranding=1&amp;rel=0&amp;autohide=1&amp;playsinline=0&amp;autoplay=0">
<iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen class="arve-iframe fitvidsignore" data-arve="arve-youtube-2ouhjeh02hu618a2322370ee085122981" data-src-no-ap="https://www.youtube-nocookie.com/embed/2ouhJeH02HU?feature=oembed&amp;iv_load_policy=3&amp;modestbranding=1&amp;rel=0&amp;autohide=1&amp;playsinline=0&amp;autoplay=0" frameborder="0" height="540" sandbox="allow-scripts allow-same-origin allow-presentation allow-popups allow-popups-to-escape-sandbox" scrolling="no" src="https://www.youtube-nocookie.com/embed/2ouhJeH02HU?feature=oembed&#038;iv_load_policy=3&#038;modestbranding=1&#038;rel=0&#038;autohide=1&#038;playsinline=0&#038;autoplay=0" width="720"></iframe>

</span>

</span>

</div>

<p><span id="more-930"></span></p>
<p>Бизнес-процессы любого типа основаны на бизнес-правилах. Бизнес-правила это логические выражения, определяющие и контролирующие бизнес-функции организации. Правила инициируют операции, координируют передачу данных и рабочий процесс, а также обеспечивают автоматическое нахождение решений в сложных ситуациях.  Они позволяют организациям достигать целей путём описания операций, определений и ограничений и т.п.</p>
<p>Управление бизнес-правилами, которые подвергаются частным изменениям, из-за влияния внешней среды является сложной организационной проблемой.  Развитие системы управления бизнес-правилами (<strong>BRMS</strong> – Business Rules Management System) будет способствовать поддержке гибкости в управление и обслуживании бизнес-процессами. <strong> BRMS</strong> &#8212; позволяют управлять правилами, без необходимости привлечения IT экспертов, так как их изменение не повлечет за собой изменение программного кода.</p>
<p>Использование <strong>BRMS</strong> даёт компании следующие преимущества:</p>
<ul>
<li>Высшую степень прозрачности в конфигурации и настройке правил</li>
<li>Уменьшение координации между IT специалистами и бизнес экспертами</li>
<li>Уменьшение количества тестирований и эксплуатационных расходов</li>
<li>Быстрая реакция на изменения</li>
<li>Отсутствие простоев, при отсутствии изменений в коде</li>
<li>Четкое разделение обязанностей, за код – IT эксперты, за бизнес правила – бизнес эксперты</li>
<li>Более быстрая разработка приложений из-за гибкости BRMS</li>
<li>Удобное графическое представление</li>
</ul>
<p>Приложение использующие BRMS, спроектировано таким образом, что неизменяемые  части остаются в приложении, а части подверженные частым изменениям переданы на управление в BRMS. Неизменяемые части включают в себя основные процессы и логику приложения, средства вывода и т.п. Изменяемые части могут включать в себя следующее:</p>
<ul>
<li>Логика принятия решений, обработка условий</li>
<li>Проверка данных и обнаружение ошибок</li>
<li>Классификация и определение данных</li>
<li>Всевозможные расчёты и формулы</li>
</ul>
<h2>Business Rule Framework +</h2>
<p>BRFPlus &#8212; это инструмент манипулирования бизнес-правилами разработанный специально для ABAP. Он предоставляет соответствующий API (набор классов) и визуальное представление для определения и настройки бизнес-правил, основанное на Web DynPro. Одни и те же правила могут использоваться в различных ABAP приложениях. BRFPlus &#8212; поддерживает тестирование правил, работу с транспортной системой и XML экспорт и импорт.</p>
<p>Необходимые тех. требования для работы с BRFPlus:</p>
<ul>
<li><strong>NetWeaver 7.0 EhP 1</strong>.</li>
<li>Полномочия на запуск транзакции <strong>FDT_WORKBENCH</strong> и <strong>BRFPlus</strong>.</li>
<li>Полномочия для объектов &#8212;<strong> FDT_OBJECT</strong> и <strong>FDT_WORKB</strong>, стандартная роль &#8212; <strong>SAP_BC_FDT_ADMINISTRATOR</strong>.</li>
<li>Справка SAP &#8212; <a href="http://help.sap.com/saphelp_scm700_ehp01/helpdata/ru/90/6ec79103594a2b913881afdb5431c5/frameset.htm">http://help.sap.com/saphelp_scm700_ehp01/helpdata/ru/90/6ec79103594a2b913881afdb5431c5/frameset.htm</a></li>
<li>SDN Space &#8212; <a href="http://scn.sap.com/community/brm">http://scn.sap.com/community/brm</a></li>
<li>Запущенный ICF сервис /sap/bc/webdynpro/sap/fdt_wd_workbench (Нота – <strong>1088717</strong>)</li>
</ul>
<div>Описание объекта полномочий:</div>
<div></div>
<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="399"><strong>Поле</strong></td>
<td valign="top" width="399"><strong>Обозначение</strong></td>
</tr>
<tr>
<td valign="top" width="399">FDT_APPL</td>
<td valign="top" width="399">ID приложения BRFPlus</td>
</tr>
<tr>
<td valign="top" width="399">FDT_OBJTYP</td>
<td valign="top" width="399">Тип объекта BRFPlus. Типы объектов задаются константами из класса: IF_FDT_CONSTANTSначинающиеся на: GC_OBJECT_TYPE_&lt;…&gt;.Application &#8212; AP<br />
Expression Type &#8212; ET<br />
Expression &#8212; EX<br />
Data Object &#8212; DO<br />
Ruleset &#8212; RS<br />
Function &#8212; FU<br />
Catalog – CA</td>
</tr>
<tr>
<td valign="top" width="399">FDT_ACT</td>
<td valign="top" width="399">Действие над объектом, задаются в интерфейсе IF_FDT_CONSTANTSконстанты начинающиеся с: GC_ACTIVITY_&lt;…&gt;.Create &#8212; 1<br />
Change &#8212; 2<br />
Display &#8212; 3<br />
Delete &#8212; 4<br />
Activate – 5</td>
</tr>
</tbody>
</table>
<p>Для запуска<strong> BRFPlus</strong> запустите транзакцию &#8212; <strong>FDT_WORKBENCH</strong> или <strong>BRFPlus</strong>. Внешний вид среды:</p>
<p><a href="http://abap-blog.ru/wp-content/uploads/2012/08/brf_11.png"><img loading="lazy" class="size-large wp-image-932" title="brf_1" src="http://abap-blog.ru/wp-content/uploads/2012/08/brf_11-1024x645.png" alt="" width="550" height="346" srcset="https://abap-blog.ru/wp-content/uploads/2012/08/brf_11-1024x645.png 1024w, https://abap-blog.ru/wp-content/uploads/2012/08/brf_11-300x189.png 300w, https://abap-blog.ru/wp-content/uploads/2012/08/brf_11.png 1261w" sizes="(max-width: 550px) 100vw, 550px" /></a></p>
<p>Слева представлено дерево объектов репозитария, справа окно редактора текущего объекта.</p>
<p><strong>Компоненты BRFPlus:</strong></p>
<ul>
<li>Приложение (Application) – контейнер верхнего уровня, содержащий все виды BRFPlus объектов.  На уровне приложения определяется тип его хранения (см. ниже), ведение версий, настройки ведения журналов, уровень хранения (пакет разработок), класс для дополнительной  обработки событий (application exit class) BRFPlus (авторизация и пр.).</li>
<li>Функция – инкапсулирует в себе бизнес-правило описанное средствами BRFPlus. Существует 3 режима работы функции.</li>
</ul>
<ol>
<li>Функциональный режим – требует обязательного наличия верхнего выражения и объекта данных результата функции. В качестве примера такого верхнего выражения может выступать таблица принятия решений (см. ниже).</li>
<li>Событийный режим – вместо верхнего выражения используются наборы правил (rulesets), которые выполняются с определенной последовательностью.</li>
<li>Смешанный режим – совмещает в себя два первых режима.</li>
</ol>
<ul>
<li>Объекты данных (Data objects) – представляют собой то же самое что и переменные в языках программирования. Могут быть как элементарными типами (номер, количество, момент даты и времени,  количество, сумма, текст), так и структурами и таблицами, состоящими из элементарных типов. Создавая элементы данных можно настроить их привязку к существующим описаниям типов из словаря. Описание элементарных типов:</li>
</ul>
<table border="1" cellspacing="0" cellpadding="0">
<tbody>
<tr>
<td valign="top" width="138"><strong>Тип</strong></td>
<td valign="top" width="600"><strong>Описание</strong></td>
</tr>
<tr>
<td valign="top" width="138">Текст</td>
<td valign="top" width="600">Текстовая переменная</td>
</tr>
<tr>
<td valign="top" width="138">Сумма</td>
<td valign="top" width="600">Кол-во в денежном выражении</td>
</tr>
<tr>
<td valign="top" width="138">Номер</td>
<td valign="top" width="600">Числовая переменная</td>
</tr>
<tr>
<td valign="top" width="138">Количество</td>
<td valign="top" width="600">Количественная переменная с указанием ЕИ</td>
</tr>
<tr>
<td valign="top" width="138">Момент</td>
<td valign="top" width="600">Дата, время, дата и время, дата и время в формате UTC</td>
</tr>
<tr>
<td valign="top" width="138">Булев.</td>
<td valign="top" width="600">Переменная булевского типа</td>
</tr>
</tbody>
</table>
<p>&nbsp;</p>
<ul>
<li>Контекст (Context) – содержит набор (или один) объектов данных, которые, как правило, используются как входные данные для выражений и операций, но так же могут там изменяться. В качестве выходных данных используются возвращаемые объекты данных (Result Data Objects) которые могут быть назначены функциям, выражениям.  Набор правил, функции содержат свой контекст.</li>
<li>Набор правил (Rulesets) – содержит правила, правило определяет условия запуска выражений.</li>
<li>Операции (Actions) – служат для работы с Workflow, отправки почты и вызова ФМ и статистических методов.</li>
<li>Каталог (Catalog) – представляет собой папку, внутри которой содержаться объекты одного или нескольких BRFPlus приложений. Благодаря каталогам можно отделить те объекты, которые будут изменяться пользователями (к примеру, правила расчёта % скидок пользователь изменять не должен, но обязан вести размеры процентов, используемых в правилах).</li>
<li>Выражения – определяют вычислительные блоки. Существует большое количество видов выражений:</li>
</ul>
<div>
<p><strong>Случай (Case)</strong></p>
<p>Аналог CASE в ABAP. Позволяет определить логику в зависимости от значения объектаданных результата.<a href="http://abap-blog.ru/wp-content/uploads/2012/08/brf_2.png"><img loading="lazy" title="brf_2" src="http://abap-blog.ru/wp-content/uploads/2012/08/brf_2.png" alt="" width="666" height="206" /></a></p>
</div>
<p><strong>Константа</strong></p>
<p>Самое простое выражение, возвращает константу, может использоваться в другихвыражениях. Возвращаемое значение может быть любым из элементарных типов.</p>
<p><strong>Случайное число</strong></p>
<p>Расчёт вероятности и случайных чисел</p>
<p><strong>Вызов функции</strong></p>
<p>Вызов BRFPlus функции</p>
<p><strong>Вызов процедуры</strong></p>
<p>Вызов статических методов из ABAP классов или ФМ</p>
<p><strong>Диапазон значений</strong></p>
<p>Проверка на вхождение в диапазон</p>
<p><strong>LOOP</strong></p>
<p>Выполнение циклических операций, аналог DO N TIMES, WHILE.. DO. DO..UNTIL.</p>
<p><strong>Формула</strong></p>
<p>Расчёт формул, пример будет ниже</p>
<p><strong>Таблица принятия решений</strong></p>
<p>Последовательно проверяет условия по столбцам строки условий, если они выполняютсяопределяет результат работы таблицы принятия решений из столбца результатов:<br />
<img loading="lazy" title="brf_3" src="http://abap-blog.ru/wp-content/uploads/2012/08/brf_3.png" alt="" width="728" height="437" /></p>
<p>Заполнение таблицы принятия решений можно осуществлять через ABAP, используя класс cl_fdt_convenience=&gt;fill_decision_table</p>
<p><strong>Дерево принятия решений</strong></p>
<p>Относительно условий, которые задаются на верхнем уровне дерева, принимаютсярешения на более низких уровнях (листьях дерева):<a href="http://abap-blog.ru/wp-content/uploads/2012/08/brf_4.png"><img loading="lazy" title="brf_4" src="http://abap-blog.ru/wp-content/uploads/2012/08/brf_4.png" alt="" width="686" height="212" /></a></p>
<p><strong>XSL – преобразование</strong></p>
<p>Выражение вызывает XSL преобразование для получения результата. Позволяетзадавать параметры для трансформаций.</p>
<p><strong>BRMS Connector</strong></p>
<p>Позволяет связаться с внешними BRMS системами.</p>
<h2>Пример</h2>
<p>В качестве примера создадим бизнес-правило (функцию) рассчитывающее объем скидки относительно авиакомпании и того является ли пассажир пассажиром премиум класса.</p>
<p>Создайте локальное приложение ZBRFTest:  Инструментальные средства -&gt; создать приложение.</p>
<p><a href="http://abap-blog.ru/wp-content/uploads/2012/08/brf_5.png"><img loading="lazy" class="size-full wp-image-936 aligncenter" title="brf_5" src="http://abap-blog.ru/wp-content/uploads/2012/08/brf_5.png" alt="" width="583" height="369" srcset="https://abap-blog.ru/wp-content/uploads/2012/08/brf_5.png 583w, https://abap-blog.ru/wp-content/uploads/2012/08/brf_5-300x189.png 300w" sizes="(max-width: 583px) 100vw, 583px" /></a></p>
<p>Тип хранения:</p>
<ul>
<li>основные данные – всегда локальный объект, перенос невозможен, мета-данные хранятся в таблицах с классом поставки «А»</li>
<li>пользовательская настройка &#8212; изменения напрямую, все метаданные хранятся в таблицах с классом поставки «С»</li>
<li>система &#8212; перенос через систему транспорта, класс поставки таблиц с мета-данными – «S».</li>
</ul>
<p>После создания приложения необходимо создать функцию. Функция это основная выполняемая сущность в BRFPlus она содержит так называемые наборы правил (Rulesets), на основе которых может быть изменен контекст функции (рассчитан результат). Под контекстом функции понимается сигнатура входящих данных.</p>
<p><a href="http://abap-blog.ru/wp-content/uploads/2012/08/brf_6.png"><img loading="lazy" class="size-full wp-image-937 aligncenter" title="brf_6" src="http://abap-blog.ru/wp-content/uploads/2012/08/brf_6.png" alt="" width="365" height="435" srcset="https://abap-blog.ru/wp-content/uploads/2012/08/brf_6.png 365w, https://abap-blog.ru/wp-content/uploads/2012/08/brf_6-251x300.png 251w" sizes="(max-width: 365px) 100vw, 365px" /></a></p>
<p>Введите название функции DISCOUNT_CALCULATE.</p>
<p><a href="http://abap-blog.ru/wp-content/uploads/2012/08/brf_7.png"><img loading="lazy" class="size-full wp-image-938 aligncenter" title="brf_7" src="http://abap-blog.ru/wp-content/uploads/2012/08/brf_7.png" alt="" width="555" height="259" srcset="https://abap-blog.ru/wp-content/uploads/2012/08/brf_7.png 555w, https://abap-blog.ru/wp-content/uploads/2012/08/brf_7-300x140.png 300w" sizes="(max-width: 555px) 100vw, 555px" /></a></p>
<p>После создания перейдите на закладку «Подпись». Необходимо создать объекты данных для контекста функции (входящие параметры функции):</p>
<p><a href="http://abap-blog.ru/wp-content/uploads/2012/08/brf_8.png"><img loading="lazy" class="size-full wp-image-939 aligncenter" title="brf_8" src="http://abap-blog.ru/wp-content/uploads/2012/08/brf_8.png" alt="" width="693" height="141" srcset="https://abap-blog.ru/wp-content/uploads/2012/08/brf_8.png 693w, https://abap-blog.ru/wp-content/uploads/2012/08/brf_8-300x61.png 300w" sizes="(max-width: 693px) 100vw, 693px" /></a></p>
<p><a href="http://abap-blog.ru/wp-content/uploads/2012/08/brf_9.png"><img loading="lazy" class="size-full wp-image-940 aligncenter" title="brf_9" src="http://abap-blog.ru/wp-content/uploads/2012/08/brf_9.png" alt="" width="783" height="321" srcset="https://abap-blog.ru/wp-content/uploads/2012/08/brf_9.png 783w, https://abap-blog.ru/wp-content/uploads/2012/08/brf_9-300x122.png 300w" sizes="(max-width: 783px) 100vw, 783px" /></a></p>
<p>&nbsp;</p>
<p>Далее на той же закладке необходимо создать объект данных результата функции:</p>
<p><a href="http://abap-blog.ru/wp-content/uploads/2012/08/brf_10.png"><img loading="lazy" class="size-full wp-image-941 aligncenter" title="brf_10" src="http://abap-blog.ru/wp-content/uploads/2012/08/brf_10.png" alt="" width="233" height="121" /></a></p>
<p>&nbsp;</p>
<p><a href="http://abap-blog.ru/wp-content/uploads/2012/08/brf_111.png"><img loading="lazy" class="size-full wp-image-942 aligncenter" title="brf_11" src="http://abap-blog.ru/wp-content/uploads/2012/08/brf_111.png" alt="" width="555" height="575" srcset="https://abap-blog.ru/wp-content/uploads/2012/08/brf_111.png 555w, https://abap-blog.ru/wp-content/uploads/2012/08/brf_111-289x300.png 289w" sizes="(max-width: 555px) 100vw, 555px" /></a></p>
<p>&nbsp;</p>
<p>Укажем тип «Номер», длинна вывода и десятичные разряды – «3».</p>
<p>Далее создадим набор правил для расчёта скидки. Закладка «Присвоенные наборы правил» -&gt; «Создать».</p>
<p><a href="http://abap-blog.ru/wp-content/uploads/2012/08/brf_12.png"><img loading="lazy" class="size-full wp-image-943 aligncenter" title="brf_12" src="http://abap-blog.ru/wp-content/uploads/2012/08/brf_12.png" alt="" width="941" height="337" srcset="https://abap-blog.ru/wp-content/uploads/2012/08/brf_12.png 941w, https://abap-blog.ru/wp-content/uploads/2012/08/brf_12-300x107.png 300w" sizes="(max-width: 941px) 100vw, 941px" /></a></p>
<p>По условию задачи нам необходимо рассчитать скиду по следующему алгоритму:</p>
<ul>
<li>Если Авиакомпания = Аэрофлот (у меня ее код – 002), считаем скидку = 1.</li>
<li>Если пассажир премиум класса, то размер скидки увеличиваем на 2.</li>
</ul>
<p>Создадим первое правило:</p>
<p><a href="http://abap-blog.ru/wp-content/uploads/2012/08/brf_13.png"><img loading="lazy" class="size-full wp-image-944 aligncenter" title="brf_13" src="http://abap-blog.ru/wp-content/uploads/2012/08/brf_13.png" alt="" width="625" height="279" srcset="https://abap-blog.ru/wp-content/uploads/2012/08/brf_13.png 625w, https://abap-blog.ru/wp-content/uploads/2012/08/brf_13-300x133.png 300w" sizes="(max-width: 625px) 100vw, 625px" /></a></p>
<p>&nbsp;</p>
<p>В условие «Если» добавим сравнение диапазона значений S_CARR_ID, в условие «то» добавим изменение значения DISCOUNT:</p>
<p><a href="http://abap-blog.ru/wp-content/uploads/2012/08/brf_14.png"><img loading="lazy" class="size-full wp-image-945 aligncenter" title="brf_14" src="http://abap-blog.ru/wp-content/uploads/2012/08/brf_14.png" alt="" width="630" height="280" srcset="https://abap-blog.ru/wp-content/uploads/2012/08/brf_14.png 630w, https://abap-blog.ru/wp-content/uploads/2012/08/brf_14-300x133.png 300w" sizes="(max-width: 630px) 100vw, 630px" /></a></p>
<p>Добавим второе правило, в нем проверим значение DISCOUNT и если оно не равно 0, умножим его на 2. Со сравнением проблем не возникнет, для умножения значения контекста на 2 воспользуемся формулой, которую необходимо предварительно создать:</p>
<p><a href="http://abap-blog.ru/wp-content/uploads/2012/08/brf_15.png"><img loading="lazy" class="size-full wp-image-946 aligncenter" title="brf_15" src="http://abap-blog.ru/wp-content/uploads/2012/08/brf_15.png" alt="" width="630" height="339" srcset="https://abap-blog.ru/wp-content/uploads/2012/08/brf_15.png 630w, https://abap-blog.ru/wp-content/uploads/2012/08/brf_15-300x161.png 300w" sizes="(max-width: 630px) 100vw, 630px" /></a></p>
<p>&nbsp;</p>
<p>При создании формулы необходимо указать ее имя, описание:</p>
<p><a href="http://abap-blog.ru/wp-content/uploads/2012/08/brf_16.png"><img loading="lazy" class="size-full wp-image-947 aligncenter" title="brf_16" src="http://abap-blog.ru/wp-content/uploads/2012/08/brf_16.png" alt="" width="474" height="436" srcset="https://abap-blog.ru/wp-content/uploads/2012/08/brf_16.png 474w, https://abap-blog.ru/wp-content/uploads/2012/08/brf_16-300x275.png 300w" sizes="(max-width: 474px) 100vw, 474px" /></a></p>
<p>&nbsp;</p>
<p>Как видно из рисунка чтобы изменить значение DISCOUNT необходимо его присвоить объекту данных результата, затем ввести формулу.</p>
<p>После создания всех правил, можно проверить работу функции через «моделирование». Для этого активируйте сначала приложение, тем самым сохранятся и активируются объекты данных и формулы. Затем активируйте функцию.</p>
<p>Запуск моделирования:</p>
<p><a href="http://abap-blog.ru/wp-content/uploads/2012/08/brf_17.png"><img loading="lazy" class="size-full wp-image-948 aligncenter" title="brf_17" src="http://abap-blog.ru/wp-content/uploads/2012/08/brf_17.png" alt="" width="699" height="438" srcset="https://abap-blog.ru/wp-content/uploads/2012/08/brf_17.png 699w, https://abap-blog.ru/wp-content/uploads/2012/08/brf_17-300x187.png 300w" sizes="(max-width: 699px) 100vw, 699px" /></a></p>
<p>&nbsp;</p>
<h2>Выполнение функций в ABAP программе</h2>
<p>Для запуска функции нам понадобится узнать её ID, находится он в подробных данных функции:</p>
<p><a href="http://abap-blog.ru/wp-content/uploads/2012/08/brf_18.png"><img loading="lazy" class="size-full wp-image-949 aligncenter" title="brf_18" src="http://abap-blog.ru/wp-content/uploads/2012/08/brf_18.png" alt="" width="696" height="196" srcset="https://abap-blog.ru/wp-content/uploads/2012/08/brf_18.png 696w, https://abap-blog.ru/wp-content/uploads/2012/08/brf_18-300x84.png 300w" sizes="(max-width: 696px) 100vw, 696px" /></a></p>
<p>&nbsp;</p>
<p>Далее привожу пример кода выполняющий функцию (ID функции у вас будет другим):</p>
<p>&nbsp;</p><pre class="urvanov-syntax-highlighter-plain-tag">REPORT fdt_sample.

PARAMETERS:
  p_custom   TYPE STRING DEFAULT 'MIKE',
  p_carrid   TYPE s_carr_id DEFAULT '002'.

DATA: lo_function TYPE REF TO if_fdt_function,
      lo_context  TYPE REF TO if_fdt_context,
      lo_result   TYPE REF TO if_fdt_result,
      lv_discount TYPE if_fdt_types=&gt;element_number,
      lx_fdt      TYPE REF TO cx_fdt,
      lt_message  TYPE if_fdt_types=&gt;t_message,
      lo_trace    TYPE REF TO if_fdt_trace.

FIELD-SYMBOLS &lt;ls_message&gt; TYPE if_fdt_types=&gt;s_message.

WRITE: / 'Пассажир:', p_custom.
WRITE: / 'Авиакомпания:', p_carrid.

" Получаем функцию
lo_function ?= cl_fdt_factory=&gt;if_fdt_factory~get_instance(
                  )-&gt;get_function( '50201F6B78850065E10080000A0000A9' ).

TRY.
    " Получаем контекст
    lo_context = lo_function-&gt;get_process_context( ).

    " Устанавливаем значения для контекста
    lo_context-&gt;set_value( iv_name  = 'S_CARR_ID'
                           ia_value = p_carrid ).

    lo_context-&gt;set_value( iv_name  = 'S_CUSTOMER'
                           ia_value = p_custom ).

    " Выполняем функцию
    lo_function-&gt;process( EXPORTING io_context = lo_context
                          IMPORTING eo_result  = lo_result
                                    eo_trace   = lo_trace ).
  CATCH cx_fdt INTO lx_fdt.
    " Выводим сообщение об ошибке
    LOOP AT lx_fdt-&gt;mt_message ASSIGNING &lt;ls_message&gt;.
      WRITE :/ &lt;ls_message&gt;-text.
    ENDLOOP.
ENDTRY.

" Если успешно завершилась, покажем результат
IF lo_result IS BOUND.
  lo_result-&gt;get_value( IMPORTING ea_value = lv_discount ).
  WRITE: / '% Скидки: ' , lv_discount.    "#EC NOTEXT
ENDIF.</pre><p>Результат:</p>
<p><a href="http://abap-blog.ru/wp-content/uploads/2012/08/brf_19.png"><img loading="lazy" class="size-full wp-image-950 aligncenter" title="brf_19" src="http://abap-blog.ru/wp-content/uploads/2012/08/brf_19.png" alt="" width="491" height="58" srcset="https://abap-blog.ru/wp-content/uploads/2012/08/brf_19.png 491w, https://abap-blog.ru/wp-content/uploads/2012/08/brf_19-300x35.png 300w" sizes="(max-width: 491px) 100vw, 491px" /></a></p>
<p>Суффикс классов *fdt* является производным от «Formula &amp; Derivation Tool» рабочее название BRFPlus.</p>
<p><strong>Основные недостатки BRF+</strong></p>
<ul>
<li>Необходимость переключения между браузером и GUI</li>
<li>Нет ограничений на имена объектов, можете вообще не указывать, можете назвать все одним именем</li>
<li>Стабильность среды желает оставлять лучшего</li>
<li>Моделирование и проверка производительности пока далеки от совершенства</li>
</ul><p>The post <a href="https://abap-blog.ru/others/vvedenie-v-brfplus/">Введение в BRFPlus</a> first appeared on <a href="https://abap-blog.ru">ABAP Blog</a>.</p>]]></content:encoded>
					
					<wfw:commentRss>https://abap-blog.ru/others/vvedenie-v-brfplus/feed/</wfw:commentRss>
			<slash:comments>1</slash:comments>
		
		
			</item>
	</channel>
</rss>
