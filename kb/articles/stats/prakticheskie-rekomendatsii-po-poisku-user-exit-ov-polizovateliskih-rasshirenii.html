<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><script>document.getElementsByTagName('html')[0].classList.add('js')</script>
	<title>Сапёр / Статьи / База знаний / SAPLAND / SAPLand — Мир решений SAP</title>
<meta name="keywords" content="User exits, Финансы и управленческий учет, FinancialsУправление логистической сетью, SCMИнформационные технологии, IT, Basis, ABAPУправление персоналом, HRУправление взаимоотношениями с клиентами, CRM, SAP Консультант, Consultant" />
<meta name="description" content="Как консультантам, так и разработчикам системы SAP приходится сталкиваться с необходимостью расширить стандартную функциональность системы. Одним из путей расширения функциональности является использование пользовательских расширений (USER-EXIT). Вопросу поиска таких расширений в стандартных приложениях SAP посвящена данная статья." />
		    <link href="https://fonts.googleapis.com/css?family=Rubik:400,700&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:500&display=swap"
          rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,600,700,800&display=swap&subset=cyrillic"
          rel="stylesheet">
	<link rel="stylesheet" href="/build/attention-block/login-article.cb663f57.css" />
<link rel="stylesheet" href="/build/attention-block/attention-blue.23524ae8.css" />
<link rel="stylesheet" href="/build/login.c6183aa5.css" />
<link rel="stylesheet" href="/build/main-menu.83fc82c5.css" />
<link rel="stylesheet" href="/build/header.fc38405f.css" />
<link rel="stylesheet" href="/build/breadcrumbs.ff1969dd.css" />
<link rel="stylesheet" href="/build/short-info.94d9a3a3.css" />
<link rel="stylesheet" href="/build/short-info/author-statistic.53b83cff.css" />
<link rel="stylesheet" href="/build/hovered-info.ea33fb03.css" />
<link rel="stylesheet" href="/build/article/layout.8f67d1fe.css" />
<link rel="stylesheet" href="/build/article-page/block-title.82fbb182.css" />
<link rel="stylesheet" href="/build/article-page/share.321c2ae2.css" />
<link rel="stylesheet" href="/build/comment.67a31886.css" />
<link rel="stylesheet" href="/build/article-page/comment-article.881f89af.css" />
<link rel="stylesheet" href="/build/article-page/note-gray.d9a735de.css" />
<link rel="stylesheet" href="/build/page-container.0347724b.css" />
<link rel="stylesheet" href="/build/arrow-up.bfddcdb1.css" />
<link rel="stylesheet" href="/build/footer.953024a7.css" />
<link rel="stylesheet" href="/build/article-page.c568a741.css" />
<link rel="stylesheet" href="/build/article-page/article-close.3d00c05a.css" />
<link rel="stylesheet" href="/build/global.3974230d.css" />
</head>
<body>
		
			<header>
	<div class="header-wrap container">
		<div class="menu-icon"><img src="/build/images/icons/menu.svg" alt=""></div><div class="logo">
				<a href="/publications">
					<img src="/os/modules/material/images/logo.svg" alt="">
				</a>
			</div><nav class="burger-menu">
				<ul>
					<li><a href="/publications">Публикации</a></li>
					<li><a href="/comments">Обсуждения</a></li>
					<li><a href="/authors">Авторы</a></li>
					<li><a href="/authors-columns">Колонки</a></li>
				</ul>
				<div class="loop"><img src="/build/images/icons/search.svg" alt=""></div>
				<form action="/publications" method="get">
					<div class="search"><input type="text" placeholder="Искать" name="filter[search][full-search-criterion][]"><button type="submit"><img src="/build/images/icons/search-bl.svg" alt=""></button></div>
				</form>
			</nav>
<div class="person-wrap">
	<a href="//sappro.sapland.ru/subscription" class="btn-subscribe">Подписка</a>
			<a href="/login/" class="btn-reg">Войти</a>
	</div>

		<div class="login-wrap">
	<div class="enter">
		<form class="enter-box" name="login-form" method="post">
			<input type="hidden" name="auth[csrf]" value="ijIO2jwGg1UYp79rxK3wZlSd2XxtAkjpwlBBf441TDE" />
			<p>Добро пожаловать</p>
			<div class="input-box">
				<span>Адрес электронной почты</span>
				<input type="text" placeholder="E-mail" name="auth[login]" required>
				<span>Пароль</span>
				<input type="password" placeholder="Password" name="auth[password]" required>
			</div>
			<div class="btn-box">
				<button class="enter-btn" type="submit">Войти</button>
				<a href="?auth[reset_password]">Забыли пароль?</a>
			</div>
		</form>
	</div>
	<div class="registration">
		<p>Станьте участником SAPLAND и получите доступ к самым интересным публикациям SAPPRO</p>
		<a  style="background-color: #ff9920;" href="//sapland.ru/register/">Зарегистрироваться</a>
	</div>
</div>
	</div>
	<div class="main-menu-wrap">
	<div class="main-menu-box container">
		<div class="logo-menu">
			<a href="/">
				<img src="/build/images/logo-menu.svg" alt="">
			</a>
			<p>Развитие в экосистеме SAP</p>
		</div>
		<div class="main-menu-list">
			<div class="main-menu-item">
			<img src="/build/images/icons/project.svg" alt="">
			<span class="menu-click">О проекте</span>
			<ul class="menu-hide">
									<li>
						<a href="//sapland.ru/about">Концепция</a>
					</li>
									<li>
						<a href="/policy">Политики</a>
					</li>
									<li>
						<a href="/contacts/">Контакты</a>
					</li>
									<li>
						<a href="//sapland.ru/authors/to-author">Авторам</a>
					</li>
							</ul>
		</div>
			<div class="main-menu-item">
			<img src="/build/images/icons/SAPPRO.svg" alt="">
			<span class="menu-click">Журнал SAPPRO</span>
			<ul class="menu-hide">
									<li>
						<a href="/publications">Публикации</a>
					</li>
									<li>
						<a href="/comments">Обсуждения</a>
					</li>
									<li>
						<a href="/authors">Авторы</a>
					</li>
									<li>
						<a href="/authors-columns">Колонки</a>
					</li>
									<li>
						<a href="/compilations">Антологии</a>
					</li>
									<li>
						<a href="/subscription">Подписка</a>
					</li>
							</ul>
		</div>
			<div class="main-menu-item">
			<img src="/build/images/icons/education.svg" alt="">
			<span class="menu-click">Учебный центр</span>
			<ul class="menu-hide">
									<li>
						<a href="//edu.sapland.ru/courses/">Курсы</a>
					</li>
									<li>
						<a href="//edu.sapland.ru/master-classes/">Мастер-классы</a>
					</li>
									<li>
						<a href="//edu.sapland.ru/webinars/?materials_filter%5Bmaterial__by-format%5D%5B%5D=935&materials_filter%5Bmaterial__by-year-of-publication%5D%5Bfrom%5D=&materials_filter%5Bmaterial__by-year-of-publication%5D%5Bto%5D=&filter%5Bsearch%5D%5Bfull-search-criterion%5D%5B%5D=">Вебинары</a>
					</li>
							</ul>
		</div>
			<div class="main-menu-item">
			<img src="/build/images/icons/SAPPRO1.svg" alt="">
			<span class="menu-click">Книги SAP Press</span>
			<ul class="menu-hide">
									<li>
						<a href="/books/novelty/">Книги на английском</a>
					</li>
									<li>
						<a href="/books/Knigi_na_russkom/">Книги на русском</a>
					</li>
							</ul>
		</div>
			<div class="main-menu-item">
			<img src="/build/images/icons/lib.svg" alt="">
			<span class="menu-click">Библиотека презентаций</span>
			<ul class="menu-hide">
									<li>
						<a href="/event">Мероприятия</a>
					</li>
									<li>
						<a href="/presentations/">Презентации</a>
					</li>
							</ul>
		</div>
			<div class="main-menu-item">
			<img src="/build/images/icons/eco.svg" alt="">
			<span class="menu-click">Экосистема SAP СНГ</span>
			<ul class="menu-hide">
									<li>
						<a href="/p-events/news/">Новости</a>
					</li>
									<li>
						<a href="/a-list">Анонсы</a>
					</li>
							</ul>
		</div>
	</div>

		<div class="social-menu">
			<ul>
	<li><a target="_blank" href="#" style=" pointer-events: none;" ><img src="/build/images/icons/sn/telegram-plane.svg" alt=""></a></li><li><a target="_blank" href="https://www.facebook.com/pages/SAPLand/127114854020362"><img src="/build/images/icons/sn/facebook.svg" alt=""></a></li><li><a target="_blank" href="https://vk.com/club4419971"><img src="/build/images/icons/sn/vk.svg" alt=""></a></li><li><a target="_blank" href="https://twitter.com/SAPLand"><img src="/build/images/icons/sn/twitter.svg" alt=""></a></li><li><a target="_blank" href="https://www.linkedin.com/groups/6797279/"><img src="/build/images/icons/sn/linkedin-in.svg" alt=""></a></li></ul>
		</div>
		<div class="close"></div>
	</div>
</div>
</header>
			<div class="container breadcrumbs">
						<span><a href="//sapland.ru">SAPLAND</a></span>
								<span><a href="/">SAPPRO</a></span>
								<span><a href="/publications">Публикации</a></span>
								<span>Статья</span>
			</div>

	
		<div class="container page article-closed "><div class="sidebar">
			</div>
	<div class="content">				
<div class="block-title">
	
			<div class="article">
		<div class="info">
						<p class="cat">
							</p>

			<h1>Практические рекомендации по поиску user-exit-ов (пользовательских расширений) в стандартном коде</h1><div class="bottom">
				
				



								
																			<div class="author">
													<a href="/profile/9315/publications">Неловкин Александр Николаевич</a>
												<div class="hovered-info">
										<div class="avatar">
		<img src="https://sappro.sapland.ru/images/cache/avatar64/userfiles/user/9315-3610.JPG" alt="">
	</div>
<div class="information">
			<h3 title="Неловкин Александр Николаевич">				<a href="/profile/9315/publications">Неловкин Александр Николаевич</a>
			</h3>
							<p>Chief Software Engineer</p>
	</div>

			<div class="stat stat_author">
											<span class="rating">828</span>
									
				<a href="/profile/9315/publications"
				><span class="pubs">5</span></a>

												
				<span class="comments" >5</span>
								</div>
	<div class="rhombus"></div>

		

	
							</div>

					</div>

																																
				
				
				<p class="date">02 марта 2012</p>
							</div>
		</div>
	</div>
</div>

	 
	 

	<div class="article-body">
		<div class="note-wrap gray-note pd">
			<p>Как консультантам, так и разработчикам системы SAP приходится сталкиваться с необходимостью расширить стандартную функциональность системы. Одним из путей расширения функциональности является использование пользовательских расширений (USER-EXIT). Вопросу поиска таких расширений в стандартных приложениях SAP посвящена данная статья.</p>
		</div>
<p>
	 </p>
<p>
	<strong>Александр Неловкин</strong> - ведущий инженер-программист отдела разработки программного обеспечения центра компетенции SAP филиала «Управление «Укргазтехсвязь» ДК «Укртрансгаз». Опыт внедрения и сопровождения систем SAP – более 14 лет. Богатый опыт по консультированию и подготовке разработчиков для SAP систем. Более десятка проектов внедрения и модернизации системы SAP. Навыки и опыт работы со всем инструментарием SAP ABAP Workbench практически во всех модулях системы.</p>
<p>
	Как показывает опыт внедрения и сопровождения систем SAP ERP, почти 30-50 % всех ABAP разработок составляют расширения стандартной функциональности при помощи пользовательских расширений (user-exit).</p>
<p>
	Механизмов, позволяющих пользователю влиять на работу стандартных программ (транзакций), - несколько. В данной статье мы рассмотрим только те механизмы, с которыми приходится сталкиваться ABAP-разработчикам в целях расширения исходного кода. Настройки, персонализацию, расширение объектов ABAP-словаря и т.п. мы рассматривать не будем.</p>
<p>
	Итак, в рамках данной статьи рассматриваются приёмы поиска в исходном коде user-exit-ов, а именно: customer-exit и BAdi (BusinessAdd-Ins). Новомодные технологии, такие, как Enhancements Spots, рассматривать в данной статье не будем. Их я использую, как правило, в крайнем случае, т.к. не имея рамок, накладываемых интерфейсом во всех вышеупомянутых технологиях, Enhancements Spots провоцирует бесконтрольно вмешательство в логику обработки данных, что может привести к нарушению их целостности.</p>
<p>
	Применение данной методики является альтернативой применению различных программ, выдающих для заданной программы/транзакции список user-exit-ов. Применение таких программ имеет один существенный недостаток – не даются ответы на вопросы:</p>
<ol>
	<li>
		Какие из перечисленных user-exit-ов вызываются, начиная с интересующего нас места в программе?</li>
	<li>
		В какой последовательности user-exit-ы вызываются?</li>
</ol>
<p>
	Предлагаемая методика (несмотря на её громоздкость) требует меньших трудозатрат за счёт того, что отсекает все «лишние» пользовательские расширения.</p>
<p>
	Рассмотрим предлагаемую методику на примере решения задачи: при создании в системе кредитора исключить появление двойника.</p>
<p>
	Для решения этой задачи необходимо поискать в системе дебитора с таким же Номером плательщика налога (т.е. выяснить, не заведена ли в систему информация об этом лице как о дебиторе). Если поиск оказался удачным, то следует заполнить поле «Дебитор» в транзакции ввода кредитора номером найденного дебитора. Для создания кредитора пользователи используют транзакцию XK01 (Ввод кредитора).</p>
<p>
	Технически, для реализации решения этой задачи нам нужно будет взять из данных создаваемого кредитора (табл. LFA1) значение поля «РегНалогНомер-1» (STCD1), сделать запрос к таблице данных существующих дебиторов (KNA1), попытаться найти в ней запись со значением поля STCD1 равным нашему значению и, если поиск успешен, скопировать из найденной записи поле KNA1-KUNNR в поле LFA1-KUNNR.</p>
<p>
	Последовательность действий:</p>
<p>
	1) Запускаем транзакцию (в нашем случае XK01)</p>
<p>
	2) Выполняем все действия, которые совершают пользователи до «ключевого» действия (в нашем примере - это сохранение данных кредитора)</p>
<p>
	3) Непосредственно перед нажатием на кнопку «Сохранить», набираем в строке команд «/h» и нажимаем Enter. В строке состояния (внизу окна) должно появиться сообщение «Отладка включена»</p>
<p>
	4) Нажимаем «Сохранить» и попадаем в отладчик. (рис.1)</p>
<p>
	<img alt="" src="/files/articles/russapexp/nelovkinimage002.jpg" style="width: 1085px; height: 444px; "></p>
<p>
	Рис. 1</p>
<p>
	5) В меню выбираем «Точки прерывания» -&gt; «Создание точки прерывания» (или нажимаем F9). Откроется модальное окошко. (рис.2)</p>
<p>
	<img alt="" src="/files/articles/russapexp/nelovkinimage003.jpg" style="width: 650px; height: 320px; "></p>
<p>
	Рис. 2</p>
<p>
	6) На закладке «ABAP команда» вписываем «call customer-function» (рис.3)</p>
<p>
	<img alt="" src="/files/articles/russapexp/nelovkinimage004.png" style="width: 647px; height: 323px; "></p>
<p>
	Рис. 3</p>
<p style="margin-left: 40px; ">
	Справка: Вызов customer-exit осуществляется оператором CALL CUSTOMER-FUNCTION.</p>
<p>
	7) На закладке «Метод» заносим «CL_EXITHANDLER» и «GET_INSTANCE» соответственно в поля «Имя класса» и «Имя метода» и нажимаем «Дальше» (кнопка <img alt="" src="/files/articles/russapexp/nelovkinimage005.png" style="width: 24px; height: 24px; ">). (рис.4)</p>
<p>
	<img></p>
<div class="attention blue">
		<p class="heading">Если хотите прочитать статью полностью и оставить свои комментарии присоединяйтесь к <span>sapland</span>
	</p>
	<a href="//sapland.ru/register/" class="btn-login">Зарегистрироваться</a>
	<div>
		<p class="text">У вас уже есть учетная запись?</p>
		<a href="#" class = "btn-reg">Войти</a>
	</div>
	
</div>

	
</div>

	<div class="share-wrap">
			<a class="btn-print" onclick="window.print();" type="button"><span>Распечатать</span></a>
</div>
	<div class="comment-article-wrap comments-h">
	<h2 class="ifp-h">Обсуждения <span class="count"><img src="/build/images/icons/speak.svg"
														  alt="Количество комментариев">0</span>
		<a class="btn rpl rpl-h inactive" href="javascript:void(0)">Написать комментарий</a>
	</h2>
			<div class="show-comment">
		
	</div>
</div>



	
			</div></div>
	<div id="arrowUp"></div>


		<div class="footer-wrapper">
				<footer>
	<div class="footer-wrap container">
		<div class="logo-wrap">
			<a href="/">
				<img src="/build/images/logo-footer.svg" alt="">
			</a>
			<ul>
	<li><a target="_blank" href="#" style=" pointer-events: none;" ><img src="/build/images/icons/sn/telegram-plane.svg" alt=""></a></li><li><a target="_blank" href="https://www.facebook.com/pages/SAPLand/127114854020362"><img src="/build/images/icons/sn/facebook.svg" alt=""></a></li><li><a target="_blank" href="https://vk.com/club4419971"><img src="/build/images/icons/sn/vk.svg" alt=""></a></li><li><a target="_blank" href="https://twitter.com/SAPLand"><img src="/build/images/icons/sn/twitter.svg" alt=""></a></li><li><a target="_blank" href="https://www.linkedin.com/groups/6797279/"><img src="/build/images/icons/sn/linkedin-in.svg" alt=""></a></li></ul>
		</div>
		<div class="menu-wrap">
			<div class="menu-item">
			<span>О проекте</span>
			<ul>
									<li>
						<a href="//sapland.ru/about">Концепция</a>
					</li>
									<li>
						<a href="/policy">Политики</a>
					</li>
									<li>
						<a href="/contacts/">Контакты</a>
					</li>
									<li>
						<a href="//sapland.ru/authors/to-author">Авторам</a>
					</li>
							</ul>
		</div>
			<div class="menu-item">
			<span>Журнал SAPPRO</span>
			<ul>
									<li>
						<a href="/publications">Публикации</a>
					</li>
									<li>
						<a href="/comments">Обсуждения</a>
					</li>
									<li>
						<a href="/authors">Авторы</a>
					</li>
									<li>
						<a href="/authors-columns">Колонки</a>
					</li>
									<li>
						<a href="/compilations">Антологии</a>
					</li>
									<li>
						<a href="/subscription">Подписка</a>
					</li>
							</ul>
		</div>
			<div class="menu-item">
			<span>Учебный центр</span>
			<ul>
									<li>
						<a href="//edu.sapland.ru/courses/">Курсы</a>
					</li>
									<li>
						<a href="//edu.sapland.ru/master-classes/">Мастер-классы</a>
					</li>
									<li>
						<a href="//edu.sapland.ru/webinars/?materials_filter%5Bmaterial__by-format%5D%5B%5D=935&materials_filter%5Bmaterial__by-year-of-publication%5D%5Bfrom%5D=&materials_filter%5Bmaterial__by-year-of-publication%5D%5Bto%5D=&filter%5Bsearch%5D%5Bfull-search-criterion%5D%5B%5D=">Вебинары</a>
					</li>
							</ul>
		</div>
			<div class="menu-item">
			<span>Книги SAP Press</span>
			<ul>
									<li>
						<a href="/books/novelty/">Книги на английском</a>
					</li>
									<li>
						<a href="/books/Knigi_na_russkom/">Книги на русском</a>
					</li>
							</ul>
		</div>
			<div class="menu-item">
			<span>Библиотека презентаций</span>
			<ul>
									<li>
						<a href="/event">Мероприятия</a>
					</li>
									<li>
						<a href="/presentations/">Презентации</a>
					</li>
							</ul>
		</div>
			<div class="menu-item">
			<span>Экосистема SAP СНГ</span>
			<ul>
									<li>
						<a href="/p-events/news/">Новости</a>
					</li>
									<li>
						<a href="/a-list">Анонсы</a>
					</li>
							</ul>
		</div>
	</div>
		<span class="text-info">Републикация материалов — только со ссылкой на SAPLAND.RU, с разрешения редакции сайта.
								Редакция не несет ответственности за высказывания пользователей на сайте.</span>
		<span class	= "writeUs">Связаться с нами:&nbsp;<a href="mailto:support@sapland.ru" class="text-mail"> support@sapland.ru</a></span>
		<span class="text-right">18+ &copy; 2009 - 2021, Учредитель ООО «Эксперт РП». Все права защищены</span>
	</div>
</footer>
	
	</div>

			
	
			
	
		<script src="/build/runtime.f011bcb1.js"></script>
<script src="/build/5.faf5a91c.js"></script>
<script src="/build/global.648d4089.js"></script>
	<script src="/build/attention-block/login-article.69d7841a.js"></script>
<script src="/build/attention-block/attention-blue.3ff74d37.js"></script>
<script src="/build/0.1fec29ad.js"></script>
<script src="/build/blocks/user.f97fe11c.js"></script>
<script src="/build/login.b895675d.js"></script>
<script src="/build/main-menu.31eac860.js"></script>
<script src="/build/header.7fd84952.js"></script>
<script src="/build/breadcrumbs.e36f86c3.js"></script>
<script src="/build/short-info.76413a3a.js"></script>
<script src="/build/short-info/author-statistic.d460c927.js"></script>
<script src="/build/hovered-info.16280c01.js"></script>
<script src="/build/1.32feafaf.js"></script>
<script src="/build/article/layout.a7a2b8ff.js"></script>
<script src="/build/article-page/block-title.a6d5d176.js"></script>
<script src="/build/article-page/share.f5b6dade.js"></script>
<script src="/build/comment.139721f4.js"></script>
<script src="/build/article-page/comment-article.38d7be87.js"></script>
<script src="/build/article-page/note-gray.e6c6d3bb.js"></script>
<script src="/build/page-container.ef05586f.js"></script>
<script src="/build/arrow-up.cb27db9e.js"></script>
<script src="/build/footer.b018aec7.js"></script>
<script src="/build/article-page.2915c0e5.js"></script>
<script src="/build/article-page/article-close.68bb7c2e.js"></script>
	<style>
        @media print {
            header {
                display: none !important;
            }
			.breadcrumbs {
                display: none; !important;
			}
			.comment-article-wrap {
                display: none; !important;
			}
			.books-wrap-sl {
                display: none; !important;
			}
			.share-wrap {
                display: none; !important;
			}
			#arrowUp {
                display: none; !important;
			}
            footer {
                display: none; !important;
            }
        }
	</style>
<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
    (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
    (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

    ym(1375405, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true,
        webvisor:true,
        trackHash:true
    });
    ym(1375405,'reachGoal','NEW_DESIGN');

</script>
<noscript><div><img src="https://mc.yandex.ru/watch/1375405" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-28264801-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-28264801-1');
</script>
</body>
</html>