{"id":6799,"date":"2021-03-21T13:07:08","date_gmt":"2021-03-21T09:07:08","guid":{"rendered":"https:\/\/abap-blog.ru\/?p=6799"},"modified":"2021-03-21T21:49:35","modified_gmt":"2021-03-21T17:49:35","slug":"opredelenie-tipa-v-operatorax-konstruktorax","status":"publish","type":"post","link":"https:\/\/abap-blog.ru\/osnovy-abap\/opredelenie-tipa-v-operatorax-konstruktorax\/","title":{"rendered":"\u041e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0442\u0438\u043f\u0430 \u0432 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430\u0445 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440\u0430\u0445"},"content":{"rendered":"<p>\u041d\u0430\u0447\u0438\u043d\u0430\u044f \u0441 ABAP 7.4. \u043d\u0430\u043c \u0441\u0442\u0430\u043b\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b <a href=\"https:\/\/help.sap.com\/doc\/abapdocu_latest_index_htm\/latest\/en-US\/abenconstructor_expressions.htm\" target=\"_blank\" rel=\"noopener\">\u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u044b \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440\u044b<\/a>, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a:<\/p>\n<pre class=\"theme:abapblog-syntax lang:abap_syntax decode:true \">... NEW| VALUE| CONV| REDUCE| \r\nCAST| REF| EXACT| CORRESPONDING|\r\nCOND| SWITCH | FILTER| \r\n     type( ... ) ...\r\n<\/pre>\n<p>\u041e\u0434\u043d\u043e\u0439 \u0438\u0437 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0435\u0439 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u0432 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043d\u0435\u044f\u0432\u043d\u043e\u0433\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0442\u0438\u043f\u0430 \u0447\u0435\u0440\u0435\u0437 #, \u0438\u0437-\u0437\u0430 \u0447\u0435\u0433\u043e \u0443 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432 \u0447\u0430\u0441\u0442\u043e <a href=\"https:\/\/answers.sap.com\/questions\/382587\/strange-behaviour-of-substring-in-reduce-expressio.html\" target=\"_blank\" rel=\"noopener\">\u0432\u043e\u0437\u043d\u0438\u043a\u0430\u044e\u0442 \u043e\u0448\u0438\u0431\u043a\u0438<\/a> \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0441 \u0438\u0445 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c.<\/p>\n<p>\u0414\u0430\u043b\u0435\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0442\u0438\u043f\u0438\u0447\u043d\u044b\u0435 \u0438\u0437 \u043d\u0438\u0445.<\/p>\n<p><!--more--><\/p>\n<p>\u0412\u043e\u0437\u044c\u043c\u0451\u043c \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440 COND (\u0440\u0435\u043b\u0435\u0432\u0430\u043d\u0442\u043d\u043e \u0438 \u0434\u043b\u044f SWITCH):<\/p>\n<pre class=\"lang:abap decode:true\">DATA(lv_val) = COND #( WHEN 1 = 2 THEN space \r\n                       ELSE 777 ).<\/pre>\n<p>\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u043c \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0435\u0442 &#8212; <strong>*<\/strong>.<\/p>\n<blockquote><p>If the operand type is not fully identifiable, an operand with a statically identifiable type must be specified after the first\u00a0<span class=\"qtext\">THEN<\/span>\u00a0(except when passing the constructor parameter to an actual parameter with generically typed formal parameter). This type is then used. In particular,\u00a0<a class=\"blue\"><span class=\"qtext\">THROW<\/span><\/a>s cannot then be specified after\u00a0<span class=\"qtext\">THEN<\/span>.<\/p><\/blockquote>\n<p>\u0410 \u0432\u0441\u0435 \u0438\u0437-\u0437\u0430 \u0442\u043e\u0433\u043e \u0447\u0442\u043e, \u0442\u0438\u043f \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0432\u0435\u0434\u0435\u043d \u043d\u0435\u044f\u0432\u043d\u043e \u0438\u0437 \u043f\u0435\u0440\u0432\u043e\u0433\u043e \u0443\u0441\u043b\u043e\u0432\u0438\u044f \u043f\u043e\u0441\u043b\u0435 THEN, \u0442.\u0435. \u0431\u0443\u0434\u0435\u0442 \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c \u043a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u0435 space. \u041a\u043e\u043d\u0441\u0442\u0430\u043d\u0442\u0430 space \u0432 ABAP \u043e\u0431\u044a\u044f\u0432\u043b\u0435\u043d\u0430 \u0441 \u0442\u0438\u043f\u043e\u043c C \u0434\u043b\u0438\u043d\u043e\u0439 1 \u0441\u0438\u043c\u0432\u043e\u043b. \u0423\u0441\u043b\u043e\u0432\u0438\u0435 1 = 2 \u043e\u0447\u0435\u0432\u0438\u0434\u043d\u043e \u043d\u0435 \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0438 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 lv_val \u0441 \u0442\u0438\u043f\u043e\u043c C \u0438 \u0434\u043b\u0438\u043d\u043e\u0439 1 \u0441\u0438\u043c\u0432\u043e\u043b \u0431\u0443\u0434\u0435\u0442 \u043f\u0440\u0438\u0441\u0432\u043e\u0435\u043d\u043e \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435 777. \u0410 \u0441\u043e\u0433\u043b\u0430\u0441\u043d\u043e <a href=\"https:\/\/help.sap.com\/doc\/abapdocu_latest_index_htm\/latest\/en-US\/abenconversion_type_ibs.htm#@@ITOC@@ABENCONVERSION_TYPE_IBS_2\" target=\"_blank\" rel=\"noopener\">\u043f\u0440\u0430\u0432\u0438\u043b\u0430\u043c \u043a\u043e\u043d\u0432\u0435\u0440\u0442\u0430\u0446\u0438\u0438<\/a>, \u0435\u0441\u043b\u0438 \u043f\u0440\u0438 \u043f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u0447\u0438\u0441\u043b\u0430 \u043a \u0441\u0438\u043c\u0432\u043e\u043b\u044c\u043d\u043e\u043c\u0443 \u0442\u0438\u043f\u0443 \u043e\u043d\u043e \u043d\u0435 \u0432\u043b\u0435\u0437\u0430\u0435\u0442 \u043f\u043e \u0440\u0430\u0437\u043c\u0435\u0440\u0443, \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0431\u0443\u0434\u0435\u0442 \u0437\u0430\u043c\u0435\u043d\u0451\u043d * (\u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0433\u043e\u0432\u043e\u0440\u044f\u0442 \u0432 \u0442\u0430\u043a\u0438\u0445 \u0441\u043b\u0443\u0447\u0430\u044f\u0445 &#171;SAP celebrates christmas&#187;).<\/p>\n<p>\u0414\u0440\u0443\u0433\u043e\u0439 \u0447\u0430\u0441\u0442\u043e\u0439 \u043e\u0448\u0438\u0431\u043a\u043e\u0439 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430 REDUCE #:<\/p>\n<pre class=\"lang:abap decode:true\">DATA: \r\n  lt_values TYPE STANDARD TABLE OF decfloat34,\r\n  lv_sum    TYPE decfloat34.\r\n  \r\nlt_values = VALUE #( ( CONV #( '0.1' ) ) \r\n                     ( CONV #( '0.2' ) )\r\n                     ( CONV #( '0.3' ) ) ).\r\n                     \r\nlv_sum = REDUCE #( INIT sum = 0 \r\n                   FOR &lt;lv&gt; IN lt_values \r\n                   NEXT sum = sum + &lt;lv&gt; ).<\/pre>\n<p>\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0432\u044b\u0440\u0430\u0436\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0435\u0442 &#8212; 0.<\/p>\n<p>\u0422\u0438\u043f \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 sum \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0432\u0435\u0434\u0435\u043d \u0438\u0441\u0445\u043e\u0434\u044f \u0438\u0437 \u043f\u0440\u0438\u0441\u0432\u043e\u0435\u043d\u0438\u044f ( = 0) &#8212; \u0432 \u0434\u0430\u043d\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435 integer. REDUCE \u0442\u0430\u043a \u0436\u0435 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0438\u0442 integer \u0438\u0441\u0445\u043e\u0434\u044f \u0438\u0437 \u0442\u0438\u043f\u0430 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 sum.<\/p>\n<p>\u041d\u043e \u0434\u0430\u0436\u0435 \u0435\u0441\u043b\u0438 \u044f\u0432\u043d\u044b\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c \u043e\u0431\u044a\u044f\u0432\u0438\u0442\u044c \u0442\u0438\u043f \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u043e\u0439 \u043f\u043e\u0441\u043b\u0435 REDUCE, \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0431\u0443\u0434\u0435\u0442 \u0442\u043e\u0442 \u0436\u0435:<\/p>\n<pre class=\"lang:abap decode:true\">DATA(lv_sum) = REDUCE decfloat34( INIT sum = 0 \r\n                                  FOR &lt;lv&gt; IN lt_values \r\n                                  NEXT sum = sum + &lt;lv&gt; ).<\/pre>\n<p>\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043e\u0441\u0442\u0430\u0451\u0442\u0441\u044f \u043f\u0440\u0435\u0436\u043d\u0438\u043c, \u0442.\u043a. \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u0430\u044f sum \u0432\u0441\u0435 \u0435\u0449\u0435 \u0438\u043c\u0435\u0435\u0442 \u0442\u0438\u043f integer, \u0441\u043e\u043e\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u0435\u043d\u043d\u043e \u043f\u0440\u0438 \u0441\u0443\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0438 \u0441\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0435\u0442 <a href=\"https:\/\/help.sap.com\/doc\/abapdocu_latest_index_htm\/latest\/en-US\/abenarith_type.htm#@@ITOC@@ABENARITH_TYPE_1\" target=\"_blank\" rel=\"noopener\">\u0446\u0435\u043b\u043e\u0447\u0438\u0441\u043b\u0435\u043d\u043d\u0430\u044f \u0430\u0440\u0438\u0444\u043c\u0435\u0442\u0438\u043a\u0430<\/a>, \u043f\u043e\u0441\u043b\u0435 \u0447\u0435\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u0446\u0435\u043b\u043e\u0433\u043e\u0447\u0438\u0441\u043b\u0435\u043d\u043d\u043e\u0433\u043e \u0441\u0443\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f \u0432 \u043f\u043e\u043b\u0435 sum \u043f\u0440\u0438\u0441\u0432\u0430\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043a \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443 \u0441 \u0442\u0438\u043f\u043e\u043c decfloat34.<\/p>\n<p>\u0427\u0442\u043e\u0431\u044b \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e \u043f\u043e\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0441\u0443\u043c\u043c\u0443, \u0441\u043b\u0435\u0434\u0443\u0435\u0442 \u044f\u0432\u043d\u043e \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u0438\u043f, \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u043a\u043e\u0442\u043e\u0440\u043e\u0433\u043e \u0431\u0443\u0434\u0443\u0442 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0442\u044c\u0441\u044f \u0440\u0430\u0441\u0447\u0451\u0442\u044b:<\/p>\n<pre class=\"lang:abap decode:true\">DATA(lv_sum) = REDUCE #( INIT sum TYPE decfloat34 \r\n                         FOR &lt;lv&gt; IN lt_values \r\n                         NEXT sum = sum + &lt;lv&gt; ).<\/pre>\n<p>\u0410 \u0435\u0449\u0435 \u043b\u0443\u0447\u0448\u0435 \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u0438\u043f \u0438 \u0442\u0430\u043c \u0438 \u0442\u0430\u043c:<\/p>\n<pre class=\"lang:abap decode:true \">DATA(lv_sum) = REDUCE decfloat34( INIT sum TYPE decfloat34 \r\n                                  FOR &lt;lv&gt; IN lt_values \r\n                                  NEXT sum = sum + &lt;lv&gt; ).<\/pre>\n<p>\u0412 \u0446\u0435\u043b\u043e\u043c \u043e\u0431\u0449\u0430\u044f \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0430\u0446\u0438\u044f \u0447\u0442\u043e \u043f\u043e \u0434\u0430\u043d\u043d\u044b\u043c \u043f\u0440\u0438\u043c\u0435\u0440\u0430\u043c, \u0447\u0442\u043e \u0432 \u0446\u0435\u043b\u043e\u043c: \u0435\u0441\u043b\u0438 \u0447\u0442\u043e-\u0442\u043e \u043c\u043e\u0436\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u044f\u0432\u043d\u044b\u043c \u043e\u0431\u0440\u0430\u0437\u043e\u043c &#8212; \u043b\u0443\u0447\u0448\u0435 \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u044d\u0442\u043e \u044f\u0432\u043d\u043e, \u0447\u0435\u043c \u043f\u043e\u043b\u0430\u0433\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u043d\u0435\u044f\u0432\u043d\u043e\u0435 \u043f\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u0435 \u0432\u044b\u043f\u043e\u043b\u043d\u044f\u0435\u043c\u043e\u0435 \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 \u0437\u0430 \u0432\u0430\u0441 \ud83d\ude42<\/p>\n","protected":false},"excerpt":{"rendered":"<p>\u041d\u0430\u0447\u0438\u043d\u0430\u044f \u0441 ABAP 7.4. \u043d\u0430\u043c \u0441\u0442\u0430\u043b\u0438 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u044b \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u044b \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440\u044b, \u0442\u0430\u043a\u0438\u0435 \u043a\u0430\u043a: &#8230; NEW| VALUE| CONV| REDUCE| CAST| REF| EXACT| CORRESPONDING| COND| SWITCH | FILTER| type( &#8230; ) &#8230; \u041e\u0434\u043d\u043e\u0439 \u0438\u0437 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u043e\u0441\u0442\u0435\u0439 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u0432 \u044f\u0432\u043b\u044f\u0435\u0442\u0441\u044f \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u043d\u0435\u044f\u0432\u043d\u043e\u0433\u043e \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0442\u0438\u043f\u0430 \u0447\u0435\u0440\u0435\u0437 #, \u0438\u0437-\u0437\u0430 \u0447\u0435\u0433\u043e \u0443 \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u043e\u0432 \u0447\u0430\u0441\u0442\u043e \u0432\u043e\u0437\u043d\u0438\u043a\u0430\u044e\u0442 \u043e\u0448\u0438\u0431\u043a\u0438 \u0441\u0432\u044f\u0437\u0430\u043d\u043d\u044b\u0435 \u0441 \u0438\u0445 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0435\u043c. \u0414\u0430\u043b\u0435\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0438\u043c \u0442\u0438\u043f\u0438\u0447\u043d\u044b\u0435 [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":[],"categories":[305],"tags":[],"_links":{"self":[{"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/posts\/6799"}],"collection":[{"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/comments?post=6799"}],"version-history":[{"count":17,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/posts\/6799\/revisions"}],"predecessor-version":[{"id":6820,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/posts\/6799\/revisions\/6820"}],"wp:attachment":[{"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/media?parent=6799"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/categories?post=6799"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/tags?post=6799"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}