{"id":709,"date":"2012-04-13T08:57:45","date_gmt":"2012-04-13T04:57:45","guid":{"rendered":"http:\/\/abap-blog.ru\/?p=709"},"modified":"2021-03-02T10:00:27","modified_gmt":"2021-03-02T06:00:27","slug":"rabota-s-mime-repozitariem","status":"publish","type":"post","link":"https:\/\/abap-blog.ru\/osnovy-abap\/rabota-s-mime-repozitariem\/","title":{"rendered":"\u0420\u0430\u0431\u043e\u0442\u0430 \u0441 MIME \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u0430\u0440\u0438\u0435\u043c"},"content":{"rendered":"<p>\u0420\u0430\u0431\u043e\u0442\u0430 \u0441 MIME \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u0430\u0440\u0438\u0435\u043c \u0447\u0435\u0440\u0435\u0437 ABAP \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u043a\u043b\u0430\u0441\u0441:\u00a0 <strong>cl_mime_repository_api. <\/strong>\u041f\u0440\u0438\u043c\u0435\u0440 \u0435\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f:<\/p>\n<pre class=\"lang:abap decode:true\">REPORT ZMIME_API.\r\n\r\nDATA: go_mime_api TYPE REF TO if_mr_api,\r\n      gv_x_str    TYPE XSTRING,\r\n      gv_str      TYPE STRING.\r\n\r\n\" \u0421\u043e\u0437\u0434\u0430\u0435\u0442 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u043a\u043b\u0430\u0441\u0441\u0430 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u0430\u0440\u0438\u0435\u043c\r\ngo_mime_api = cl_mime_repository_api=&gt;get_api( ).\r\n\r\ngv_str = 'Hello World!'.\r\n\r\n\" \u041f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u0435\u043c \u0432 XSTRING\r\nCALL FUNCTION 'HR_KR_STRING_TO_XSTRING'\r\n  EXPORTING\r\n    unicode_string         = gv_str\r\n  IMPORTING\r\n    XSTRING_STREAM         = gv_x_str\r\n  EXCEPTIONS\r\n    INVALID_CODEPAGE       = 1\r\n    INVALID_STRING         = 2\r\n    OTHERS                 = 3.\r\n\r\n\" \u0417\u0430\u043f\u0438\u0449\u0435\u043c \u0432 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u0430\u0440\u0438\u0439.\r\ngo_mime_api-&gt;put(\r\n  EXPORTING\r\n    i_url                     = '\/SAP\/BC\/BSP\/SAP\/...\/TEST.TXT'\r\n    i_content                 = gv_x_str\r\n  EXCEPTIONS\r\n    parameter_missing         = 1\r\n    error_occured             = 2\r\n    cancelled                 = 3\r\n    permission_failure        = 4\r\n    data_inconsistency        = 5\r\n    new_loio_already_exists   = 6\r\n    is_folder                 = 7\r\n    OTHERS                    = 8\r\n).\r\n\r\nIF sy-subrc &lt;&gt; 0.\r\n MESSAGE ID sy-msgid TYPE sy-msgty NUMBER sy-msgno\r\n            WITH sy-msgv1 sy-msgv2 sy-msgv3 sy-msgv4.\r\nENDIF.\r\n\r\nCLEAR: gv_x_str, gv_str.\r\n\r\n\" \u041f\u0440\u043e\u0447\u0438\u0442\u0430\u0435\u043c \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u0438\u0437 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u0430\u0440\u0438\u044f\r\ngo_mime_api-&gt;get(\r\n  EXPORTING\r\n    i_url                  = '\/SAP\/BC\/BSP\/SAP\/...\/TEST.TXT'\r\n  IMPORTING\r\n    e_content              = gv_x_str\r\n  EXCEPTIONS\r\n    parameter_missing      = 1\r\n    error_occured          = 2\r\n    not_found              = 3\r\n    permission_failure     = 4\r\n    OTHERS                 = 5\r\n).\r\n\r\nIF sy-subrc &lt;&gt; 0.\r\n  MESSAGE ID sy-msgid TYPE sy-msgty NUMBER sy-msgno\r\n             WITH sy-msgv1 sy-msgv2 sy-msgv3 sy-msgv4.\r\nENDIF.\r\n\r\n\" \u041f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u0435\u043c \u043e\u0431\u0440\u0430\u0442\u043d\u043e \u0432 \u0441\u0442\u0440\u043e\u043a\u0443\r\nCALL FUNCTION 'HR_KR_XSTRING_TO_STRING'\r\n  EXPORTING\r\n    in_xstring          = gv_x_str\r\n  IMPORTING\r\n    out_string          = gv_str.\r\n\r\nWRITE gv_str.<\/pre>\n","protected":false},"excerpt":{"rendered":"<p>\u0420\u0430\u0431\u043e\u0442\u0430 \u0441 MIME \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u0430\u0440\u0438\u0435\u043c \u0447\u0435\u0440\u0435\u0437 ABAP \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u0430 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u044f \u043a\u043b\u0430\u0441\u0441:\u00a0 cl_mime_repository_api. \u041f\u0440\u0438\u043c\u0435\u0440 \u0435\u0433\u043e \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f: REPORT ZMIME_API. DATA: go_mime_api TYPE REF TO if_mr_api, gv_x_str TYPE XSTRING, gv_str TYPE STRING. &#187; \u0421\u043e\u0437\u0434\u0430\u0435\u0442 \u044d\u043a\u0437\u0435\u043c\u043f\u043b\u044f\u0440 \u043a\u043b\u0430\u0441\u0441\u0430 \u0434\u043b\u044f \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u0440\u0435\u043f\u043e\u0437\u0438\u0442\u0430\u0440\u0438\u0435\u043c go_mime_api = cl_mime_repository_api=&gt;get_api( ). gv_str = &#8216;Hello World!&#8217;. &#187; \u041f\u0440\u0435\u043e\u0431\u0440\u0430\u0437\u0443\u0435\u043c \u0432 XSTRING CALL FUNCTION &#8216;HR_KR_STRING_TO_XSTRING&#8217; EXPORTING unicode_string = gv_str IMPORTING [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":[],"categories":[305,311,310],"tags":[177,176,175],"_links":{"self":[{"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/posts\/709"}],"collection":[{"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/comments?post=709"}],"version-history":[{"count":8,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/posts\/709\/revisions"}],"predecessor-version":[{"id":2182,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/posts\/709\/revisions\/2182"}],"wp:attachment":[{"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/media?parent=709"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/categories?post=709"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/tags?post=709"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}