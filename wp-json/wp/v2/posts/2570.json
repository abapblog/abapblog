{"id":2570,"date":"2015-07-10T10:30:03","date_gmt":"2015-07-10T06:30:03","guid":{"rendered":"http:\/\/abap-blog.ru\/?p=2570"},"modified":"2021-03-02T10:12:17","modified_gmt":"2021-03-02T06:12:17","slug":"rabota-s-gos-kontejnerom","status":"publish","type":"post","link":"https:\/\/abap-blog.ru\/osnovy-abap\/sap-dynpro\/rabota-s-gos-kontejnerom\/","title":{"rendered":"\u0420\u0430\u0431\u043e\u0442\u0430 \u0441 GOS \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440\u043e\u043c"},"content":{"rendered":"<p>\u041c\u043d\u043e\u0433\u0438\u0435 \u0438\u0437 \u0412\u0430\u0441 \u0432\u0438\u0434\u0435\u043b\u0438 \u0432 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0445 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f\u0445 \u043a\u043d\u043e\u043f\u043a\u0438 \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u0432 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0435 \u044d\u043a\u0440\u0430\u043d\u0430:<\/p>\n<p><a href=\"http:\/\/abap-blog.ru\/wp-content\/uploads\/2015\/07\/11.png\"><img loading=\"lazy\" class=\"alignnone size-full wp-image-2571\" src=\"http:\/\/abap-blog.ru\/wp-content\/uploads\/2015\/07\/11.png\" alt=\"1\" width=\"459\" height=\"194\" srcset=\"https:\/\/abap-blog.ru\/wp-content\/uploads\/2015\/07\/11.png 459w, https:\/\/abap-blog.ru\/wp-content\/uploads\/2015\/07\/11-300x127.png 300w\" sizes=\"(max-width: 459px) 100vw, 459px\" \/><\/a><\/p>\n<p>\u0414\u043b\u044f \u0442\u043e\u0433\u043e \u0447\u0442\u043e\u0431\u044b \u0438\u043c\u0435\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0440\u0430\u0441\u043f\u043e\u043b\u0430\u0433\u0430\u0442\u044c GUI \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u0432 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0435 \u0435\u0441\u0442\u044c \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043e\u043d cl_gui_gos_container. \u041f\u0440\u0438\u043c\u0435\u0440 \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u043d\u0438\u043c \u0434\u0430\u043b\u0435\u0435.<\/p>\n<p><!--more--><\/p>\n<pre class=\"lang:abap decode:true \">DATA:\r\n  go_toolbar   TYPE REF TO cl_gui_toolbar,\r\n  go_container TYPE REF TO cl_gui_gos_container,\r\n  gv_icon      TYPE iconname,\r\n  gv_quick     TYPE iconquick,\r\n  gt_event     TYPE cntl_simple_events,\r\n  gs_event     TYPE cntl_simple_event.\r\n\r\nCLASS lcl_handle_event DEFINITION DEFERRED.\r\n\r\nDATA tool_event TYPE REF TO lcl_handle_event.\r\n*\r\nCLASS lcl_handle_event DEFINITION.\r\n  PUBLIC SECTION.\r\n    METHODS: on_dropdown_clicked FOR EVENT dropdown_clicked\r\n               OF cl_gui_toolbar\r\n                 IMPORTING fcode posx posy.\r\n    METHODS: on_function_selected FOR EVENT function_selected\r\n               OF cl_gui_toolbar\r\n                 IMPORTING fcode.\r\nENDCLASS.                    \"lcl_handle_event DEFINITION\r\n*\r\nCLASS lcl_handle_event IMPLEMENTATION.\r\n  METHOD on_dropdown_clicked.\r\n    DATA: my_menu  TYPE REF TO cl_ctmenu,\r\n          sub_menu TYPE REF TO cl_ctmenu.\r\n\r\n    CREATE OBJECT my_menu.\r\n\r\n    CASE fcode.\r\n      WHEN 'MY_MENU'.\r\n\r\n        my_menu-&gt;add_function( fcode = 'OPTION1'\r\n                               text  = 'Do something...1' ).\r\n        my_menu-&gt;add_function( fcode = 'OPTION2'\r\n                               text  = 'Do something...2' ).\r\n        my_menu-&gt;add_function( fcode = 'OPTION3'\r\n                               text  = 'Do something...3' ).\r\n\r\n        my_menu-&gt;add_separator( ).\r\n*   Create sub menu\r\n        CREATE OBJECT sub_menu.\r\n\r\n        sub_menu-&gt;add_function( fcode = 'SUB1'\r\n                                text  = 'Do something...1' ).\r\n        sub_menu-&gt;add_function( fcode = 'SUB2'\r\n                                text  = 'Do something...2' ).\r\n\r\n\r\n*-- Add sub menu to the context menu\r\n        my_menu-&gt;add_submenu( menu = sub_menu\r\n                              text = 'Do something else.....' ).\r\n      WHEN 'MY_MENU2'.\r\n        my_menu-&gt;add_function( fcode = 'OPTION21'\r\n                               text  = 'Do something crazy' ).\r\n        my_menu-&gt;add_function( fcode = 'OPTION22'\r\n                               text  = 'Do something funny' ).\r\n    ENDCASE.\r\n\r\n    CALL METHOD go_toolbar-&gt;track_context_menu\r\n      EXPORTING\r\n        context_menu = my_menu\r\n        posx         = posx\r\n        posy         = posy.\r\n\r\n\r\n  ENDMETHOD.                    \"ON_DROPDOWN_CLICKED\r\n\r\n  METHOD on_function_selected.\r\n    CASE fcode.\r\n      WHEN 'MY_MENU'.  MESSAGE i208(00) WITH 'Press on Icon Plane'.\r\n      WHEN 'MY_MENU2'. MESSAGE i208(00) WITH 'Press on Icon Truck'.\r\n      WHEN 'OPTION1'.  MESSAGE i208(00) WITH 'Option 1'.\r\n      WHEN 'OPTION2'.  MESSAGE i208(00) WITH 'Option 2'.\r\n      WHEN 'OPTION3'.  MESSAGE i208(00) WITH 'Option 3'.\r\n      WHEN 'SUB1'.     MESSAGE i208(00) WITH 'Sub Option 1'.\r\n      WHEN 'SUB2'.     MESSAGE i208(00) WITH 'Sub Option 2'.\r\n      WHEN 'OPTION21'. MESSAGE i208(00) WITH 'Option 2\/1'.\r\n      WHEN 'OPTION22'. MESSAGE i208(00) WITH 'Option 2\/2'.\r\n    ENDCASE.\r\n  ENDMETHOD.                    \"ON_FUNCTION_SELECTED\r\nENDCLASS.                    \"lcl_handle_event IMPLEMENTATION\r\n\r\n\r\nSTART-OF-SELECTION.\r\n\r\n  CREATE OBJECT go_container\r\n    EXPORTING\r\n      width                   = 160\r\n      no_autodef_progid_dynnr = 'X'\r\n    EXCEPTIONS\r\n      OTHERS                  = 5.\r\n\r\n  CHECK sy-subrc = 0.\r\n  CREATE OBJECT go_toolbar\r\n    EXPORTING\r\n      parent = go_container.\r\n\r\n  CALL FUNCTION 'ICON_CREATE'\r\n    EXPORTING\r\n      name       = 'ICON_WS_PLANE'\r\n      add_stdinf = space\r\n    IMPORTING\r\n      RESULT     = gv_icon\r\n    EXCEPTIONS\r\n      OTHERS     = 0.\r\n\r\n  gv_quick = 'New Menu'.\r\n\r\n  CALL METHOD go_toolbar-&gt;add_button\r\n    EXPORTING\r\n      fcode     = 'MY_MENU'\r\n      icon      = gv_icon\r\n      butn_type = 1\r\n      quickinfo = gv_quick.\r\n\r\n  CLEAR gv_icon.\r\n  gv_quick = 'New Menu 2'.\r\n\r\n  CALL FUNCTION 'ICON_CREATE'\r\n    EXPORTING\r\n      name       = 'ICON_TRANSPORT'\r\n      add_stdinf = space\r\n    IMPORTING\r\n      RESULT     = gv_icon\r\n    EXCEPTIONS\r\n      OTHERS     = 0.\r\n\r\n  CALL METHOD go_toolbar-&gt;add_button\r\n    EXPORTING\r\n      fcode     = 'MY_MENU2'\r\n      icon      = gv_icon\r\n      butn_type = 1\r\n      text      = 'Go on!'\r\n      quickinfo = gv_quick.\r\n\r\n  CLEAR gt_event.\r\n  gs_event-eventid = cl_gui_toolbar=&gt;m_id_function_selected.\r\n  gs_event-appl_event = space.\r\n  APPEND gs_event TO gt_event.\r\n  gs_event-eventid = cl_gui_toolbar=&gt;m_id_dropdown_clicked.\r\n  gs_event-appl_event = space.\r\n  APPEND gs_event TO gt_event.\r\n  CALL METHOD go_toolbar-&gt;set_registered_events\r\n    EXPORTING\r\n      events = gt_event.\r\n\r\n  CREATE OBJECT tool_event.\r\n\r\n  SET HANDLER tool_event-&gt;on_dropdown_clicked FOR go_toolbar.\r\n  SET HANDLER tool_event-&gt;on_function_selected FOR go_toolbar.\r\n\r\n  WRITE 'Hello'.<\/pre>\n<p>\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442:<\/p>\n<p><a href=\"http:\/\/abap-blog.ru\/wp-content\/uploads\/2015\/07\/21.png\"><img loading=\"lazy\" class=\"alignnone size-full wp-image-2572\" src=\"http:\/\/abap-blog.ru\/wp-content\/uploads\/2015\/07\/21.png\" alt=\"2\" width=\"227\" height=\"96\" \/><\/a><\/p>\n","protected":false},"excerpt":{"rendered":"<p>\u041c\u043d\u043e\u0433\u0438\u0435 \u0438\u0437 \u0412\u0430\u0441 \u0432\u0438\u0434\u0435\u043b\u0438 \u0432 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0445 \u0442\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u044f\u0445 \u043a\u043d\u043e\u043f\u043a\u0438 \u0440\u0430\u0441\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u043d\u044b\u0435 \u0432 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0435 \u044d\u043a\u0440\u0430\u043d\u0430: \u0414\u043b\u044f \u0442\u043e\u0433\u043e \u0447\u0442\u043e\u0431\u044b \u0438\u043c\u0435\u0442\u044c \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u044c \u0440\u0430\u0441\u043f\u043e\u043b\u0430\u0433\u0430\u0442\u044c GUI \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u044b \u0432 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0435 \u0435\u0441\u0442\u044c \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u043a\u043e\u043d\u0442\u0435\u0439\u043d\u0435\u0440 \u043d\u0430\u0437\u044b\u0432\u0430\u0435\u0442\u0441\u044f \u043e\u043d cl_gui_gos_container. \u041f\u0440\u0438\u043c\u0435\u0440 \u0440\u0430\u0431\u043e\u0442\u044b \u0441 \u043d\u0438\u043c \u0434\u0430\u043b\u0435\u0435.<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":[],"categories":[308],"tags":[],"_links":{"self":[{"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/posts\/2570"}],"collection":[{"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/comments?post=2570"}],"version-history":[{"count":2,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/posts\/2570\/revisions"}],"predecessor-version":[{"id":2574,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/posts\/2570\/revisions\/2574"}],"wp:attachment":[{"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/media?parent=2570"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/categories?post=2570"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/tags?post=2570"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}