{"id":4126,"date":"2020-04-16T12:50:42","date_gmt":"2020-04-16T08:50:42","guid":{"rendered":"https:\/\/abap-blog.ru\/?post_type=epkb_post_type_1&#038;p=4126"},"modified":"2020-06-18T17:30:32","modified_gmt":"2020-06-18T13:30:32","slug":"skript-dlya-poiska-rasshirenij","status":"publish","type":"epkb_post_type_1","link":"https:\/\/abap-blog.ru\/abap-notes\/skript-dlya-poiska-rasshirenij\/","title":{"rendered":"\u0421\u043a\u0440\u0438\u043f\u0442 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0439"},"content":{"rendered":"\t\t<!-- Article Structure Version 2 Style -->\r\n\r\n\t\t<style>\t\t\t \/* DESKTOP *\/ \n#eckb-article-page-container-v2  {\r\n\t\t\t\twidth: 100% }#eckb-article-page-container-v2 #eckb-article-body {\r\n\t\t\t\twidth: 100px }\r\n\t\t        \/* NO LEFT SIDEBAR *\/\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-body {\r\n\t\t\t\t      grid-template-columns:  0 100% 0%;\r\n\t\t\t\t}\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-left-sidebar {\r\n\t\t\t\t\t\tdisplay:none;\r\n\t\t\t\t}\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-content {\r\n\t\t\t\t\t\tgrid-column-start: 1;\r\n\t\t\t\t\t\tgrid-column-end: 3;\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\/* NO RIGHT SIDEBAR *\/\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-body {\r\n\t\t\t\t      grid-template-columns: 0% 100% 0 ;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-right-sidebar {\r\n\t\t\t\t\t\tdisplay:none;\r\n\t\t\t\t}\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-content {\r\n\t\t\t\t\t\tgrid-column-start: 2;\r\n\t\t\t\t\t\tgrid-column-end: 4;\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-body {\r\n\t\t\t\t      grid-template-columns: 0 100% 0;\r\n\t\t\t\t}\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-left-sidebar {\r\n\t\t\t\t\t\tdisplay:none;\r\n\t\t\t\t}\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-right-sidebar {\r\n\t\t\t\t\t\tdisplay:none;\r\n\t\t\t\t}\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-content {\r\n\t\t\t\t\t\tgrid-column-start: 1;\r\n\t\t\t\t\t\tgrid-column-end: 4;\r\n\t\t\t\t\t}\r\n\t\t\t\t \/* TABLET *\/ \n@media only screen and ( max-width: 1025px ) {#eckb-article-page-container-v2  {\r\n\t\t\t\twidth: 100% }#eckb-article-page-container-v2 #eckb-article-body {\r\n\t\t\t\twidth: 100% }\r\n\t\t        \/* NO LEFT SIDEBAR *\/\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-body {\r\n\t\t\t\t      grid-template-columns:  0 100% 0%;\r\n\t\t\t\t}\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-left-sidebar {\r\n\t\t\t\t\t\tdisplay:none;\r\n\t\t\t\t}\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-content {\r\n\t\t\t\t\t\tgrid-column-start: 1;\r\n\t\t\t\t\t\tgrid-column-end: 3;\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\/* NO RIGHT SIDEBAR *\/\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-body {\r\n\t\t\t\t      grid-template-columns: 0% 100% 0 ;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-right-sidebar {\r\n\t\t\t\t\t\tdisplay:none;\r\n\t\t\t\t}\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-content {\r\n\t\t\t\t\t\tgrid-column-start: 2;\r\n\t\t\t\t\t\tgrid-column-end: 4;\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-body {\r\n\t\t\t\t      grid-template-columns: 0 100% 0;\r\n\t\t\t\t}\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-left-sidebar {\r\n\t\t\t\t\t\tdisplay:none;\r\n\t\t\t\t}\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-right-sidebar {\r\n\t\t\t\t\t\tdisplay:none;\r\n\t\t\t\t}\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-content {\r\n\t\t\t\t\t\tgrid-column-start: 1;\r\n\t\t\t\t\t\tgrid-column-end: 4;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\/* SHARED *\/\r\n\t\t\t#eckb-article-page-container-v2 #eckb-article-left-sidebar {\r\n\t\t\t\tpadding: 10px 10px 10px 10px; ;\r\n\t\t\t\tbackground-color: #f7f7f7;\t\t\t\tmargin-top: 0px;\t\t\t}\r\n\t\t\t\r\n\t\t\t#eckb-article-page-container-v2 #eckb-article-left-sidebar:before {\r\n\t\t\t\theight: 0px;\t\t\t}\r\n\t\t\t\r\n\t\t\t#eckb-article-page-container-v2 #eckb-article-content {\r\n\t\t\t\tpadding: 10px;;\r\n\t\t\t\tbackground-color: #ffffff;\t\t\t}\r\n\t\t\t#eckb-article-page-container-v2 #eckb-article-right-sidebar {\r\n\t\t\t\tpadding: 10px 10px 10px 10px;;\r\n\t\t\t\tbackground-color: #fbfbfb;\t\t\t\tmargin-top: 0px;\t\t\t}\r\n\t\t\t\r\n\t\t\t#eckb-article-page-container-v2 #eckb-article-right-sidebar:before {\r\n\t\t\t\theight: 0px;\t\t\t}\r\n\r\n\t\t\t\/* MOBILE - Set all columns to full width. *\/\r\n\t\t\t@media only screen and ( max-width: 1000px ) {\r\n\r\n\t\t\t\t#eckb-article-page-container-v2 {\r\n\t\t\t\t\twidth:100%;\r\n\t\t\t\t}\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-content {\r\n\t\t\t\t\tgrid-column-start: 1;\r\n\t\t\t\t\tgrid-column-end: 4;\r\n\t\t\t\t}\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-left-sidebar {\r\n\t\t\t\t\tgrid-column-start: 1;\r\n\t\t\t\t\tgrid-column-end: 4;\r\n\t\t\t\t}\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-right-sidebar {\r\n\t\t\t\t\tgrid-column-start: 1;\r\n\t\t\t\t\tgrid-column-end: 4;\r\n\t\t\t\t}\r\n\t\t\t\t#eckb-article-page-container-v2 .eckb-article-toc {\r\n\t\t\t\t\tposition: relative;\r\n\t\t\t\t\tfloat: left;\r\n\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\theight: auto;\r\n\t\t\t\t\ttop: 0;\r\n\t\t\t\t}\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-body {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tflex-direction: column;\r\n\t\t\t\t}\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-left-sidebar { order: 3; }\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-content { order: 2; }\r\n\t\t\t\t#eckb-article-page-container-v2 #eckb-article-right-sidebar { order: 1; }\r\n\t\t\t}\r\n\r\n\t\t<\/style>    \r\n\t\t<div id=\"eckb-article-page-container-v2\" class=\" eckb_ap_active_theme_flat \" >    <div id=\"eckb-article-header\">\r\n\t\t<script>\r\n\t\t\tvar ajaxurl = 'https:\/\/abap-blog.ru\/wp-admin\/admin-ajax.php';\r\n\t\t<\/script>   <\/div>\r\n\t\t   <div id=\"eckb-article-body\">  <div id=\"eckb-article-left-sidebar\"><\/div>\r\n\t\t       <article id=\"eckb-article-content\">                        <div id=\"eckb-article-content-header\"><h1 class=\"eckb-article-title kb-article-id\" id=\"4126\">\u0421\u043a\u0440\u0438\u043f\u0442 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0439<\/h1><div class=\"eckb-article-content-header__article-meta\"><div class=\"eckb-ach__article-meta__date-created\"><span class=\"eckb-ach__article-meta__date-created__date-icon epkbfa epkbfa-calendar\"><\/span><span class=\"eckb-ach__article-meta__date-created__text\">\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f:<\/span><span class=\"eckb-ach__article-meta__date-created__date\"><time class=\"entry-date\" datetime=\"2020-04-16T12:50:42+04:00\">16.04.2020<\/time><\/span><\/div><div class=\"eckb-ach__article-meta__author\"><span class=\"eckb-ach__article-meta__author__author-icon epkbfa epkbfa-user\"><\/span><span class=\"eckb-ach__article-meta__author__text\">\u0410\u0432\u0442\u043e\u0440:<\/span><span class=\"eckb-ach__article-meta__author__name\">Astrafox<\/span><\/div><\/div>\r\n<div class=\"eckb-breadcrumb\" style=\"padding-top: 4px; padding-right: 4px; padding-bottom: 4px; padding-left: 4px; margin-top: 0px; margin-right: 0px; margin-bottom: 20px; margin-left: 0px; font-size:16px;;\">\t\t\t<div class=\"eckb-breadcrumb-label\">\r\n\t\t\t\u0412\u044b \u0437\u0434\u0435\u0441\u044c:\t\t<\/div>\t\t<nav class=\"eckb-breadcrumb-outline\">\r\n\t\t<ul class=\"eckb-breadcrumb-nav\">       <li style=\"font-size:16px;;\">\t<span class=\"eckb-breadcrumb-link\"><a tabindex=\"0\" href=\"https:\/\/abap-blog.ru\/abap-notes\/\"><span style=\"color: #1e73be;\" >\u0413\u043b\u0430\u0432\u043d\u0430\u044f<\/span><\/a><span class=\"eckb-breadcrumb-link-icon ep_font_icon_arrow_carrot_right\"><\/span>\t<\/span><\/li><li style=\"font-size:16px;;\">\t<span class=\"eckb-breadcrumb-link\"><a tabindex=\"0\" href=\"https:\/\/abap-blog.ru\/abap-notes\/category\/otladka\/\"><span style=\"color: #1e73be;\" >\u041e\u0442\u043b\u0430\u0434\u043a\u0430<\/span><\/a><span class=\"eckb-breadcrumb-link-icon ep_font_icon_arrow_carrot_right\"><\/span>\t<\/span><\/li><li style=\"font-size:16px;;\">\t<span class=\"eckb-breadcrumb-link\"><span aria-current=\"page\"style=\"color: #1e73be;\" >\u0421\u043a\u0440\u0438\u043f\u0442 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0439<\/span>\t<\/span><\/li>\t\t<\/ul>\r\n\t<\/nav>\r\n\r\n<\/div>          <div class=\"eckb-navigation-back  \" style=\"margin-top: 4px; margin-right: 4px; margin-bottom: 4px; margin-left: 4px;\"><div tabindex=\"0\" class=\"eckb-navigation-button\" style=\"padding-top: 4px; padding-right: 4px; padding-bottom: 4px; padding-left: 4px; color: #046d93; background-color: #ffffff; font-size:16px;; border-radius: 3px; border-style: none; border-width: 1px; border-color: #ffffff;\" onclick=\"history.go(-1);\" >\u2190 \u0412\u0441\u0435 \u0441\u0442\u0430\u0442\u044c\u0438<\/div><\/div><\/div><div id=\"eckb-article-content-body\"><p>\u0421\u043a\u0440\u0438\u043f\u0442 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043d\u0430\u0439\u0442\u0438 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f \u0447\u0435\u0440\u0435\u0437 \u043e\u0442\u043b\u0430\u0434\u0447\u0438\u043a.<\/p>\n<p><a href=\"https:\/\/abap-blog.ru\/wp-content\/uploads\/2020\/04\/ScriptOptions.png\"><img loading=\"lazy\" class=\"wp-image-4301 aligncenter\" src=\"https:\/\/abap-blog.ru\/wp-content\/uploads\/2020\/04\/ScriptOptions.png\" alt=\"\" width=\"783\" height=\"257\" srcset=\"https:\/\/abap-blog.ru\/wp-content\/uploads\/2020\/04\/ScriptOptions.png 1219w, https:\/\/abap-blog.ru\/wp-content\/uploads\/2020\/04\/ScriptOptions-300x98.png 300w, https:\/\/abap-blog.ru\/wp-content\/uploads\/2020\/04\/ScriptOptions-1024x336.png 1024w, https:\/\/abap-blog.ru\/wp-content\/uploads\/2020\/04\/ScriptOptions-768x252.png 768w\" sizes=\"(max-width: 783px) 100vw, 783px\" \/><\/a><\/p>\n<pre class=\"lang:abap decode:true\">*&lt;SCRIPT:PERSISTENT&gt;\r\nREPORT  rstpda_script_template.\r\n\r\n*&lt;SCRIPT:HEADER&gt;\r\n*&lt;SCRIPTNAME&gt;ZSB_ENHANCMENT_SEARCH&lt;\/SCRIPTNAME&gt;\r\n*&lt;SCRIPT_CLASS&gt;LCL_DEBUGGER_SCRIPT&lt;\/SCRIPT_CLASS&gt;\r\n*&lt;SCRIPT_COMMENT&gt;\u041f\u043e\u0438\u0441\u043a \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0439&lt;\/SCRIPT_COMMENT&gt;\r\n*&lt;BP_REACHED&gt;X&lt;\/BP_REACHED&gt;\r\n\r\n*&lt;\/SCRIPT:HEADER&gt;\r\n\r\n*&lt;SCRIPT:PRESETTINGS&gt;\r\n\r\n*&lt;\/SCRIPT:PRESETTINGS&gt;\r\n\r\n*&lt;SCRIPT:SCRIPT_CLASS&gt;\r\nCLASS lcl_debugger_script DEFINITION INHERITING FROM  cl_tpda_script_class_super  .\r\n\r\n  PUBLIC SECTION.\r\n    METHODS: init    REDEFINITION,\r\n      script  REDEFINITION,\r\n      end     REDEFINITION,\r\n      get_abap_src_info RETURNING VALUE(rs_info) TYPE tpda_scr_prg_info RAISING cx_tpda_src_info,\r\n      check_stack,\r\n      check_breakpoints,\r\n      check_bp IMPORTING iv_bp_type TYPE string\r\n                         it_stack   TYPE tpda_stack_view_it.\r\n\r\n    METHODS: check_events_in_stack IMPORTING is_stack_view TYPE tpda_stack_view.\r\n  PRIVATE SECTION.\r\n    TYPES:\r\n      BEGIN OF ts_script_params,\r\n        trace          TYPE flag,\r\n        debug          TYPE flag,\r\n        customer_exits TYPE flag,\r\n        new_badi       TYPE flag,\r\n        old_badi       TYPE flag,\r\n        enhancements   TYPE flag,\r\n        bte            TYPE flag,\r\n        user_exits     TYPE flag,\r\n      END OF ts_script_params.\r\n\r\n    DATA: mt_functions    TYPE RANGE OF tpda_event.\r\n    DATA: mt_forms        TYPE RANGE OF tpda_event.\r\n    DATA: mt_progs_cache  TYPE HASHED TABLE OF tpda_scr_prg_info WITH UNIQUE KEY program include line.\r\n\r\n    DATA:\r\n      ms_script_params TYPE ts_script_params.\r\nENDCLASS.                    \"lcl_debugger_script DEFINITION\r\n*---------------------------------------------------------------------*\r\n*       CLASS lcl_debugger_script IMPLEMENTATION\r\n*---------------------------------------------------------------------*\r\n*\r\n*---------------------------------------------------------------------*\r\nCLASS lcl_debugger_script IMPLEMENTATION.\r\n\r\n  METHOD init.\r\n    ms_script_params-trace = ms_script_params-customer_exits = ms_script_params-old_badi =\r\n    ms_script_params-new_badi = ms_script_params-enhancements = ms_script_params-bte = abap_true.\r\n\r\n    cl_ci_query_attributes=&gt;generic(\r\n      EXPORTING\r\n        p_name       = CONV #( sy-repid )\r\n        p_title      = '\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0441\u043a\u0440\u0438\u043f\u0442\u0430'\r\n        p_attributes = VALUE #(\r\n\r\n                                ( kind  = 'G'\r\n                                  text  = '\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0437\u0430\u043f\u0443\u0441\u043a\u0430'\r\n                                  ref   = REF #( sy-subrc ) )\r\n\r\n                                ( ref   = REF #( ms_script_params-trace )\r\n                                  kind  = 'R'\r\n                                  text  = '\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0444\u0430\u0439\u043b \u0442\u0440\u0430\u0441\u0441\u0438\u0440\u043e\u0432\u043a\u0438' )\r\n\r\n                                ( ref   = REF #( ms_script_params-debug )\r\n                                  kind  = 'R'\r\n                                  text  = '\u041f\u0440\u0435\u0440\u044b\u0432\u0430\u043d\u0438\u0435 \u0432 \u043e\u0442\u043b\u0430\u0434\u0447\u0438\u043a\u0435' )\r\n\r\n                                ( kind  = 'G'\r\n                                  text  = '\u0422\u0438\u043f\u044b \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0439'\r\n                                  ref   = REF #( sy-subrc ) )\r\n\r\n                                ( ref   = REF #( ms_script_params-customer_exits )\r\n                                  kind  = 'C'\r\n                                  text  = 'Customer Exits' )\r\n\r\n                                ( ref   = REF #( ms_script_params-new_badi )\r\n                                  kind  = 'C'\r\n                                  text  = 'New BAdI' )\r\n\r\n                                ( ref   = REF #( ms_script_params-old_badi )\r\n                                  kind  = 'C'\r\n                                  text  = 'Old BAdI' )\r\n\r\n                                ( ref   = REF #( ms_script_params-enhancements )\r\n                                  kind  = 'C'\r\n                                  text  = 'Enhancements' )\r\n\r\n                                ( ref   = REF #( ms_script_params-bte )\r\n                                  kind  = 'C'\r\n                                  text  = 'BTE (OpenFI)' )\r\n\r\n                                ( ref   = REF #( ms_script_params-user_exits )\r\n                                  kind  = 'C'\r\n                                  text  = 'User Exits' )\r\n        )\r\n\r\n        p_display    = '' ).\r\n\r\n    TRY.\r\n        IF ms_script_params-old_badi = abap_true.\r\n          cl_tpda_script_bp_services=&gt;set_bp_method_global_class(\r\n            p_methodname = 'GET_INSTANCE'\r\n            p_classname  = 'CL_EXITHANDLER' ).\r\n        ENDIF.\r\n\r\n        IF ms_script_params-customer_exits = abap_true.\r\n          cl_tpda_script_bp_services=&gt;set_bp_statement( p_statement = 'CALL CUSTOMER-FUNCTION' ).\r\n        ENDIF.\r\n\r\n        IF ms_script_params-enhancements = abap_true.\r\n          cl_tpda_script_bp_services=&gt;set_bp_statement( p_statement = 'ENHANCEMENT' ).\r\n        ENDIF.\r\n\r\n        IF ms_script_params-new_badi = abap_true.\r\n          cl_tpda_script_bp_services=&gt;set_bp_statement( p_statement = 'CALL BADI' ).\r\n          cl_tpda_script_bp_services=&gt;set_bp_statement( p_statement = 'GET BADI' ).\r\n        ENDIF.\r\n\r\n        cl_tpda_script_bp_services=&gt;set_bp_stack_change( cl_tpda_script_bp_services=&gt;c_script_bp ).\r\n      CATCH cx_tpda_scr_bp.\r\n    ENDTRY.\r\n\r\n    IF ms_script_params-bte = abap_true.\r\n      mt_functions = VALUE #( ( sign = 'I' option = 'CP' low = 'OPEN_FI_PERFORM_*' )\r\n                              ( sign = 'I' option = 'CP' low = 'OUTBOUND_CALL_*'   )\r\n                              ( sign = 'I' option = 'CP' low = 'EXIT*' ) ).\r\n    ENDIF.\r\n\r\n    IF ms_script_params-user_exits = abap_true.\r\n      mt_forms = VALUE #( ( sign = 'I' option = 'CP' low = 'USEREXIT*' ) ).\r\n    ENDIF.\r\n  ENDMETHOD.                    \"init\r\n\r\n  METHOD check_bp.\r\n    CASE iv_bp_type.\r\n      WHEN 'CALL CUSTOMER-FUNCTION'.\r\n        CHECK ms_script_params-customer_exits = abap_true.\r\n      WHEN 'ENHANCEMENT'.\r\n        CHECK ms_script_params-enhancements = abap_true.\r\n      WHEN 'CALL BADI' OR 'GET BADI'.\r\n        CHECK ms_script_params-new_badi = abap_true.\r\n      WHEN OTHERS.\r\n        RETURN.\r\n    ENDCASE.\r\n\r\n    IF ms_script_params-debug = abap_true.\r\n      me-&gt;break( ).\r\n    ENDIF.\r\n\r\n    IF ms_script_params-trace = abap_true.\r\n      TRY.\r\n          DATA(ls_program_info) = get_abap_src_info( ).\r\n        CATCH cx_tpda_src_info.\r\n          RETURN.\r\n      ENDTRY.\r\n\r\n      trace-&gt;add_custom_info(\r\n        EXPORTING\r\n          p_trace_entry = VALUE #( value = |{ iv_bp_type } AT: { it_stack[ 1 ]-eventtype } { it_stack[ 1 ]-eventname }, line: { it_stack[ 1 ]-line }, program:{ it_stack[ 1 ]-program }|\r\n                                   type = iv_bp_type ) ).\r\n\r\n      trace-&gt;add_src_info( ).\r\n      trace-&gt;add_event_info(\r\n        EXPORTING\r\n          p_abap_only = abap_true ).\r\n    ENDIF.\r\n  ENDMETHOD.\r\n\r\n  METHOD get_abap_src_info.\r\n    cl_tpda_script_abapdescr=&gt;get_abap_src_info( IMPORTING p_prg_info = rs_info ).\r\n    READ TABLE mt_progs_cache WITH TABLE KEY program = rs_info-program\r\n                                             include = rs_info-include\r\n                                             line    = rs_info-line\r\n      TRANSPORTING NO FIELDS.\r\n\r\n    IF sy-subrc = 0.\r\n      RAISE EXCEPTION TYPE cx_tpda_src_info.\r\n    ELSE.\r\n      INSERT rs_info INTO TABLE mt_progs_cache.\r\n    ENDIF.\r\n  ENDMETHOD.\r\n\r\n  METHOD check_stack.\r\n    TRY.\r\n        DATA(lt_stack) = cl_tpda_script_abapdescr=&gt;get_abap_dynp_stack( ).\r\n      CATCH cx_tpda_stack_error.\r\n    ENDTRY.\r\n\r\n    check_events_in_stack( is_stack_view = lt_stack[ 1 ] ).\r\n  ENDMETHOD.\r\n\r\n  METHOD check_breakpoints.\r\n    TRY.\r\n        DATA(lt_stack) = cl_tpda_script_abapdescr=&gt;get_abap_dynp_stack( ).\r\n      CATCH cx_tpda_stack_error.\r\n        RETURN.\r\n    ENDTRY.\r\n\r\n    TRY.\r\n        DATA(lt_breakpoints) = cl_tpda_script_bp_services=&gt;get_reached_script_bps( ).\r\n      CATCH cx_root.\r\n        RETURN.\r\n    ENDTRY.\r\n\r\n    LOOP AT lt_breakpoints ASSIGNING FIELD-SYMBOL(&lt;ls_breakpoint&gt;) WHERE statementsta IS NOT INITIAL.\r\n      check_bp( it_stack = lt_stack\r\n                iv_bp_type = CONV #( &lt;ls_breakpoint&gt;-statementsta ) ).\r\n    ENDLOOP.\r\n  ENDMETHOD.\r\n\r\n  METHOD script.\r\n    check_stack( ).\r\n    check_breakpoints( ).\r\n  ENDMETHOD.                    \"script\r\n\r\n  METHOD end.\r\n  ENDMETHOD.                    \"end\r\n\r\n  METHOD check_events_in_stack.\r\n    DATA:\r\n      ls_program_info TYPE tpda_scr_prg_info.\r\n\r\n    CASE is_stack_view-eventtype.\r\n      WHEN 'FUNCTION'.\r\n        CHECK is_stack_view-eventname IN mt_functions AND ms_script_params-bte = abap_true.\r\n\r\n        IF ms_script_params-trace = abap_true.\r\n          TRY.\r\n              ls_program_info = get_abap_src_info( ).\r\n            CATCH cx_tpda_src_info.\r\n              RETURN.\r\n          ENDTRY.\r\n\r\n          trace-&gt;add_custom_info(\r\n            EXPORTING\r\n              p_trace_entry = VALUE #( value = |FM { is_stack_view-eventname }|\r\n                                       type = 'BTE(FM)' ) ).\r\n        ENDIF.\r\n\r\n      WHEN 'FORM'.\r\n        CHECK is_stack_view-eventname IN mt_forms AND ms_script_params-user_exits = abap_true.\r\n\r\n        IF ms_script_params-trace = abap_true.\r\n          TRY.\r\n              ls_program_info = get_abap_src_info( ).\r\n            CATCH cx_tpda_src_info.\r\n              RETURN.\r\n          ENDTRY.\r\n\r\n          trace-&gt;add_custom_info(\r\n            EXPORTING\r\n              p_trace_entry = VALUE #( value = |PROGRAM: { ls_program_info-program }, INCLUDE: { ls_program_info-include }, FORM { is_stack_view-eventname }|\r\n                                       type = 'USER-EXIT' ) ).\r\n        ENDIF.\r\n\r\n      WHEN 'METHOD'.\r\n        IF is_stack_view-eventname = 'GET_INSTANCE' AND is_stack_view-program CP 'CL_EXITHANDLER*' AND ms_script_params-old_badi = abap_true.\r\n          TRY.\r\n              DATA(lv_exit_name) = cl_tpda_script_data_descr=&gt;get_simple_value( 'EXIT_NAME' ).\r\n            CATCH cx_tpda_varname cx_tpda_script_no_simple_type.\r\n          ENDTRY.\r\n\r\n          IF ms_script_params-trace = abap_true.\r\n            TRY.\r\n                ls_program_info = get_abap_src_info( ).\r\n              CATCH cx_tpda_src_info.\r\n                RETURN.\r\n            ENDTRY.\r\n          ENDIF.\r\n\r\n          IF NOT lv_exit_name IS INITIAL.\r\n            IF ms_script_params-trace = abap_true.\r\n              trace-&gt;add_custom_info(\r\n                EXPORTING\r\n                  p_trace_entry = VALUE #( value = | OLD BADI: { lv_exit_name }|\r\n                                           type = 'OLD_BADI' ) ).\r\n            ENDIF.\r\n          ELSE.\r\n            TRY.\r\n                IF ms_script_params-trace = abap_true.\r\n                  DATA(ls_instance) = cl_tpda_script_data_descr=&gt;get_variable_info( p_var_name  = 'INSTANCE' ).\r\n                  trace-&gt;add_custom_info(\r\n                    EXPORTING\r\n                      p_trace_entry = VALUE #( value = |OLD BADI : { ls_instance-vartype } |\r\n                                               type = 'OLD_BADI' ) ).\r\n                ENDIF.\r\n              CATCH cx_tpda_varname .\r\n                RETURN.\r\n            ENDTRY.\r\n          ENDIF.\r\n        ELSEIF ( is_stack_view-eventname CP  'IPR_*' OR\r\n                 is_stack_view-eventname CP  'IPO_*' OR\r\n                 is_stack_view-eventname CP  'IWO_*' ) AND ms_script_params-enhancements = abap_true.\r\n\r\n          IF ms_script_params-trace = abap_true.\r\n            DATA(lv_type) =  SWITCH string( is_stack_view-eventname+0(4)\r\n                                            WHEN 'IPR_' THEN 'PreExit Method'\r\n                                            WHEN 'IPO_' THEN 'PostExit Method'\r\n                                            WHEN 'IWO_' THEN 'OverWrite-Exit Method'\r\n                                            ELSE '' ).\r\n\r\n            TRY.\r\n                ls_program_info = get_abap_src_info( ).\r\n              CATCH cx_tpda_src_info.\r\n                RETURN.\r\n            ENDTRY.\r\n\r\n            SPLIT ls_program_info-program AT '=' INTO sy-msgv1 sy-msgv2 IN CHARACTER MODE.\r\n            SPLIT ls_program_info-eventname AT '~' INTO sy-msgv2 sy-msgv3 IN CHARACTER MODE.\r\n\r\n            trace-&gt;add_custom_info(\r\n              EXPORTING\r\n                p_trace_entry = VALUE #( value = |Class: { sy-msgv1 }, Method: { sy-msgv3  } |\r\n                                             type = lv_type ) ).\r\n          ENDIF.\r\n        ELSE.\r\n          RETURN.\r\n        ENDIF.\r\n      WHEN OTHERS.\r\n        RETURN.\r\n    ENDCASE.\r\n\r\n    IF ms_script_params-trace = abap_true.\r\n      trace-&gt;add_src_info( ).\r\n      trace-&gt;add_event_info(\r\n        EXPORTING\r\n          p_abap_only = abap_true ).\r\n    ENDIF.\r\n\r\n    IF ms_script_params-debug = abap_true.\r\n      me-&gt;break( ).\r\n    ENDIF.\r\n  ENDMETHOD.\r\n\r\nENDCLASS.                    \"lcl_debugger_script IMPLEMENTATION\r\n*&lt;\/SCRIPT:SCRIPT_CLASS&gt;\r\n\r\n*&lt;\/SCRIPT:PERSISTENT&gt;<\/pre>\n<p>\u041e\u0431 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u0438 \u0447\u0438\u0442\u0430\u0439\u0442\u0435 \u0432 <a href=\"https:\/\/sapland.ru\/kb\/articles\/stats\/chetire-tehniki-praktiki-poiska-rasshirenii-koda.html#_Toc509223762\">\u0441\u0442\u0430\u0442\u044c\u0435<\/a>.<\/p>\n<p><a href=\"https:\/\/github.com\/MikeSidorochkin\/ZSMG_DEBUG\">https:\/\/github.com\/MikeSidorochkin\/ZSMG_DEBUG<\/a><\/p>\n<\/div><div id=\"eckb-article-content-footer\"><div class=\"eckb-article-content-footer__article-meta\"><div class=\"eckb-ach__article-meta__date-updated\"><span class=\"eckb-ach__article-meta__date-updated__date-icon epkbfa epkbfa-pencil-square-o\"><\/span><span class=\"eckb-ach__article-meta__date-updated__text\">\u0414\u0430\u0442\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f:<\/span><span class=\"eckb-ach__article-meta__date-updated__date\"><time class=\"entry-date\" datetime=\"2020-06-18T17:30:32+04:00\">18.06.2020<\/time><\/span><\/div><\/div><div class=\"epkb-comments-container\"><\/div><\/div>\r\n\t\t       <\/article><!-- \/#eckb-article-content -->     <div id=\"eckb-article-right-sidebar\"><\/div>\r\n\t\t   <\/div><!-- \/#eckb-article-body -->              <div id=\"eckb-article-footer\"><\/div>\r\n\t\t<\/div><!-- \/#eckb-article-page-container -->\r\n\t\t\r\n\t\t<style id=\"eckb-article-print-styles\">\r\n\t\t\t@media print {\r\n\t\t\t\t@page {\r\n\t\t\t\t\tmargin: 10px 10px 10px 10px!important;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t<\/style>\r\n\t\t<style id=\"eckb-article-styles\" type=\"text\/css\">#eckb-article-body .eckb-article-title {\r\t\t\t\t\t\t\r\t\t\t\t\t\t}<\/style>\t\t","protected":false},"excerpt":{"rendered":"<p>\u0421\u043a\u0440\u0438\u043f\u0442 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0439\u0414\u0430\u0442\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f:16.04.2020\u0410\u0432\u0442\u043e\u0440:Astrafox \u0412\u044b \u0437\u0434\u0435\u0441\u044c: \u0413\u043b\u0430\u0432\u043d\u0430\u044f \u041e\u0442\u043b\u0430\u0434\u043a\u0430 \u0421\u043a\u0440\u0438\u043f\u0442 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u2190 \u0412\u0441\u0435 \u0441\u0442\u0430\u0442\u044c\u0438\u0421\u043a\u0440\u0438\u043f\u0442 \u043f\u043e\u0437\u0432\u043e\u043b\u044f\u0435\u0442 \u043d\u0430\u0439\u0442\u0438 \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u044f \u0447\u0435\u0440\u0435\u0437 \u043e\u0442\u043b\u0430\u0434\u0447\u0438\u043a. *&lt;SCRIPT:PERSISTENT&gt; REPORT rstpda_script_template. *&lt;SCRIPT:HEADER&gt; *&lt;SCRIPTNAME&gt;ZSB_ENHANCMENT_SEARCH&lt;\/SCRIPTNAME&gt; *&lt;SCRIPT_CLASS&gt;LCL_DEBUGGER_SCRIPT&lt;\/SCRIPT_CLASS&gt; *&lt;SCRIPT_COMMENT&gt;\u041f\u043e\u0438\u0441\u043a \u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0439&lt;\/SCRIPT_COMMENT&gt; *&lt;BP_REACHED&gt;X&lt;\/BP_REACHED&gt; *&lt;\/SCRIPT:HEADER&gt; *&lt;SCRIPT:PRESETTINGS&gt; *&lt;\/SCRIPT:PRESETTINGS&gt; *&lt;SCRIPT:SCRIPT_CLASS&gt; CLASS lcl_debugger_script DEFINITION INHERITING FROM cl_tpda_script_class_super . PUBLIC SECTION. METHODS: init REDEFINITION, script REDEFINITION, end REDEFINITION, get_abap_src_info RETURNING VALUE(rs_info) TYPE tpda_scr_prg_info [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"open","ping_status":"closed","template":"","meta":[],"epkb_post_type_1_category":[357],"epkb_post_type_1_tag":[],"_links":{"self":[{"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/epkb_post_type_1\/4126"}],"collection":[{"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/epkb_post_type_1"}],"about":[{"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/types\/epkb_post_type_1"}],"author":[{"embeddable":true,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/comments?post=4126"}],"version-history":[{"count":4,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/epkb_post_type_1\/4126\/revisions"}],"predecessor-version":[{"id":4331,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/epkb_post_type_1\/4126\/revisions\/4331"}],"wp:attachment":[{"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/media?parent=4126"}],"wp:term":[{"taxonomy":"epkb_post_type_1_category","embeddable":true,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/epkb_post_type_1_category?post=4126"},{"taxonomy":"epkb_post_type_1_tag","embeddable":true,"href":"https:\/\/abap-blog.ru\/wp-json\/wp\/v2\/epkb_post_type_1_tag?post=4126"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}